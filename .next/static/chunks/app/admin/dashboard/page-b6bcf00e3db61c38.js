(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{25408:(e,s,a)=>{Promise.resolve().then(a.bind(a,38288))},38288:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eA});var t=a(95155),l=a(12115),n=a(22454),i=a(37621),r=a(96029),c=a(83209),d=a(91169),o=a(17910),x=a(1473),m=a(26983),h=a(68122);function u(e){var s;let{stats:a,isLoading:l}=e;if(l)return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-6",children:(0,t.jsx)(h.E,{className:"h-16 w-full"})})},s))});let n=[{title:"Total Leads",value:(null==a||null==(s=a.totalLeads)?void 0:s.toLocaleString())||"0",icon:d.A,bgColor:"bg-blue-100",iconColor:"text-primary",change:"+126%",changeLabel:"week-over-week"},{title:"Validated Sources",value:(null==a?void 0:a.validatedSourcesPercentage)?"".concat(parseFloat(String(a.validatedSourcesPercentage).replace("%","")).toFixed(1),"%"):"99.1%",icon:o.A,bgColor:"bg-green-100",iconColor:"text-green-600",change:"99.2%",changeLabel:"validation accuracy"},{title:"AI Score",value:(null==a?void 0:a.avgAiScore)?parseFloat(String(a.avgAiScore)).toFixed(1):"6.3",icon:x.A,bgColor:"bg-purple-100",iconColor:"text-purple-600",change:"6.2/10",changeLabel:"average lead quality"},{title:"Active Monitoring",value:"24/7",icon:m.A,bgColor:"bg-orange-100",iconColor:"text-orange-600",change:"878K",changeLabel:"AI responses generated"}];return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(e=>(0,t.jsx)(c.Zp,{children:(0,t.jsxs)(c.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 truncate max-w-full",children:e.value})]}),(0,t.jsx)("div",{className:"w-12 h-12 ".concat(e.bgColor," rounded-lg flex items-center justify-center"),children:(0,t.jsx)(e.icon,{className:"".concat(e.iconColor," text-xl")})})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-green-600 text-sm font-medium",children:["↗ ",e.change]}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:e.changeLabel})]})]})},e.title))})}var p=a(81894),j=a(67812),g=a(97003),v=a(90923);function N(){let[e,s]=(0,l.useState)("new"),[a,r]=(0,l.useState)({new:20,contacted:20,nurturing:20,qualified:20,converted:20}),{data:d,isLoading:o}=(0,n.I)({queryKey:["/api/leads"],queryFn:()=>i.F.getLeads()}),{data:x}=(0,n.I)({queryKey:["/api/dashboard/stats"],queryFn:()=>i.F.getDashboardStats()}),{data:m}=(0,n.I)({queryKey:["/api/leads/pipeline"],queryFn:()=>fetch("/api/leads/pipeline").then(e=>e.json())}),h=(null==m?void 0:m.totalLeads)||0,u=(null==m?void 0:m.newLeads)||0,p=(null==m?void 0:m.contactedLeads)||0,N=(null==m?void 0:m.nurturingLeads)||0,b=(null==m?void 0:m.qualifiedLeads)||0,y=(null==m?void 0:m.convertedLeads)||0,f=e=>{if(!d)return[];switch(e){case"new":return(null==d?void 0:d.filter(e=>!e.aiScore||"0"===e.aiScore).slice(0,20))||[];case"contacted":return(null==d?void 0:d.filter(e=>e.aiScore&&parseFloat(e.aiScore)>0&&6>parseFloat(e.aiScore)).slice(0,20))||[];case"nurturing":return(null==d?void 0:d.filter(e=>e.aiScore&&parseFloat(e.aiScore)>=6&&8>parseFloat(e.aiScore)).slice(0,15))||[];case"qualified":return(null==d?void 0:d.filter(e=>e.aiScore&&parseFloat(e.aiScore)>=8&&9.5>parseFloat(e.aiScore)).slice(0,10))||[];case"converted":return(null==d?void 0:d.filter(e=>e.aiScore&&parseFloat(e.aiScore)>=9.5).slice(0,5))||[];default:return[]}};return o?(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"Lead Pipeline"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"animate-pulse space-y-4",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"h-20 bg-gray-200 rounded"},e))})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:"\uD83C\uDFAF"}),(0,t.jsx)("span",{children:"Lead Pipeline Overview"}),h>0&&(0,t.jsxs)("span",{className:"ml-4 text-sm bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[h.toLocaleString()," Total Leads"]})]}),(0,t.jsx)(c.BT,{children:"Track leads through the entire customer journey from discovery to conversion"})]}),(0,t.jsx)(c.Wu,{children:h>0?(0,t.jsx)("div",{className:"grid grid-cols-5 gap-4",children:[{stage:"new",label:"New Leads",count:u,color:"bg-blue-500"},{stage:"contacted",label:"Contacted",count:p,color:"bg-yellow-500"},{stage:"nurturing",label:"Nurturing",count:N,color:"bg-orange-500"},{stage:"qualified",label:"Qualified",count:b,color:"bg-purple-500"},{stage:"converted",label:"Converted",count:y,color:"bg-green-500"}].map(a=>(0,t.jsxs)("div",{className:"p-4 rounded-lg cursor-pointer transition-all ".concat(e===a.stage?"ring-2 ring-blue-500 bg-blue-50":"bg-gray-50 hover:bg-gray-100"),onClick:()=>{s(a.stage),r(e=>({...e,[a.stage]:10}))},children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(a.color," mb-2")}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:a.label}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:a.count}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"new"===a.stage?"Active prospects":"contacted"===a.stage?"Contacted leads":"nurturing"===a.stage?"In nurturing":"qualified"===a.stage?"Ready to convert":"Converted successfully"})]},a.stage))}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("p",{children:"No pipeline data available"}),(0,t.jsx)("p",{className:"text-sm",children:"Connect your lead sources to start tracking the pipeline"})]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"capitalize break-words",children:[e," Leads"]}),(0,t.jsxs)(c.BT,{className:"break-words",children:[f(e).length," leads in this stage"]})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)(v.tU,{defaultValue:"list",className:"w-full",children:[(0,t.jsxs)(v.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(v.Xi,{value:"list",children:"List View"}),(0,t.jsx)(v.Xi,{value:"kanban",children:"Kanban View"})]}),(0,t.jsxs)(v.av,{value:"list",className:"space-y-4",children:[(0,t.jsx)("div",{className:"space-y-3",children:f(e).slice(0,a[e]||10).map(e=>{var s;return(0,t.jsx)("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 break-words leading-5 flex-1 min-w-0",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,t.jsx)(j.E,{className:(e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority||"medium"),children:e.priority||"medium"}),(0,t.jsx)(j.E,{variant:"outline",children:e.sourcePlatform})]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 break-words whitespace-pre-wrap leading-relaxed",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Discovered: ",new Date(e.discoveredAt).toLocaleDateString()]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"px-2 py-1 rounded text-xs font-semibold ".concat((s=Number(e.aiScore)||0)>=8?"text-green-600 bg-green-100":s>=6?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"),children:e.aiScore?Number(e.aiScore).toFixed(1):"N/A"}),(0,t.jsx)("div",{className:"flex space-x-2",children:(0,t.jsx)(g.$,{size:"sm",variant:"outline",onClick:()=>window.open(e.sourceUrl,"_blank"),className:"border-gray-200 text-gray-700 hover:bg-gray-50",children:"View Source →"})})]})]})]})},e.id)})}),f(e).length>(a[e]||10)&&(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsxs)(g.$,{variant:"outline",onClick:()=>{r(s=>({...s,[e]:(s[e]||10)+10}))},children:["Load More (",f(e).length-(a[e]||10)," remaining)"]})})]}),(0,t.jsx)(v.av,{value:"kanban",children:(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("p",{children:"Kanban view coming soon..."}),(0,t.jsx)("p",{className:"text-sm",children:"Drag and drop leads between stages"})]})})]})})]})]})}var b=a(55850),y=a(77959),f=a(70561),w=a(99776),C=a(80549),A=a(33789),k=a(90235),S=a(23664),R=a(35299),P=a(39867),E=a(42529),F=a(6132),L=a(19408),T=a(69141),D=a(16485),I=a(45345),Z=a(81630);function B(){let[e,s]=(0,l.useState)(20),[a,i]=(0,l.useState)("all"),r=(0,w.jE)(),{data:o,isLoading:x}=(0,n.I)({queryKey:["/api/contacts"],staleTime:3e4}),{data:m,isLoading:h}=(0,n.I)({queryKey:["/api/contacts",a],enabled:"all"!==a,staleTime:3e4}),u=(0,C.n)({mutationFn:async e=>await (0,Z.AT)("/api/gmail/extract-contacts",{method:"POST",body:JSON.stringify(e)}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/contacts"]})}}),p="all"===a?(null==o?void 0:o.contacts)||[]:(null==m?void 0:m.contacts)||[],v=u.isPending;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center",children:[(0,t.jsx)(S.A,{className:"w-6 h-6 mr-2"}),"Gmail Contact Extraction"]}),(0,t.jsx)(c.BT,{children:"Scan your Gmail for immigration-related conversations and automatically extract contact information"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.J,{htmlFor:"maxResults",children:"Max Results"}),(0,t.jsx)(A.p,{id:"maxResults",type:"number",value:e,onChange:e=>s(Number(e.target.value)),min:5,max:100,disabled:v})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.J,{htmlFor:"source",children:"Filter by Source"}),(0,t.jsxs)("select",{id:"source",value:a,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[(0,t.jsx)("option",{value:"all",children:"All Sources"}),(0,t.jsx)("option",{value:"gmail",children:"Gmail"}),(0,t.jsx)("option",{value:"social-media",children:"Social Media"}),(0,t.jsx)("option",{value:"upload",children:"File Upload"})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)(g.$,{onClick:()=>{u.mutate({maxResults:e})},disabled:v,className:"w-full",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Extracting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.A,{className:"w-4 h-4 mr-2"}),"Extract Contacts"]})})})]}),u.data&&(0,t.jsx)("div",{className:"mt-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-800",children:u.data.success?(0,t.jsxs)("div",{className:"flex items-center text-green-700 dark:text-green-300",children:[(0,t.jsx)(E.A,{className:"w-5 h-5 mr-2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:u.data.message}),u.data.data&&(0,t.jsxs)("p",{className:"text-sm",children:["Found ",u.data.data.totalContactsFound," contacts, added ",u.data.data.newContactsAdded," new ones"]})]})]}):(0,t.jsxs)("div",{className:"flex items-center text-red-700 dark:text-red-300",children:[(0,t.jsx)(F.A,{className:"w-5 h-5 mr-2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Extraction Failed"}),(0,t.jsx)("p",{className:"text-sm",children:u.data.error})]})]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(d.A,{className:"w-8 h-8 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:p.length}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Contacts"})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(S.A,{className:"w-8 h-8 text-green-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:p.filter(e=>"gmail"===e.source).length}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"From Gmail"})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(L.A,{className:"w-8 h-8 text-purple-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:p.filter(e=>"investor"===e.leadType).length}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Investors"})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(d.A,{className:"w-8 h-8 text-orange-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:p.filter(e=>"customer"===e.leadType).length}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customers"})]})]})})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 mr-2"}),"Extracted Contacts (",p.length,")"]}),(0,t.jsx)(c.BT,{children:"Contact information extracted from Gmail and other sources"})]}),(0,t.jsx)(c.Wu,{children:x||h?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(R.A,{className:"w-8 h-8 animate-spin"}),(0,t.jsx)("span",{className:"ml-2",children:"Loading contacts..."})]}):0===p.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,t.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No contacts found. Try extracting from Gmail first."})]}):(0,t.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,t.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):e.email}),e.leadType&&(0,t.jsx)(j.E,{className:(e=>{switch(e){case"investor":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"customer":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"consultation":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}})(e.leadType),children:e.leadType}),(0,t.jsx)(j.E,{variant:"outline",className:"text-xs",children:e.source})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsx)(S.A,{className:"w-4 h-4 mr-1"}),e.email]}),e.phone&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsx)(T.A,{className:"w-4 h-4 mr-1"}),e.phone]}),e.company&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsx)(L.A,{className:"w-4 h-4 mr-1"}),e.company]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsx)(D.A,{className:"w-4 h-4 mr-1"}),new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.tags&&e.tags.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(I.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,3).map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:e},s)),e.tags.length>3&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-3," more"]})]})]})]})]}),e.notes&&(0,t.jsx)("div",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-sm",children:(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:e.notes.length>200?"".concat(e.notes.substring(0,200),"..."):e.notes})})]})})},e.id))})})]})]})}var q=a(54664),W=a(30814),z=a(5937);function $(){let[e,s]=(0,l.useState)(!1),a=(0,w.jE)(),{data:i,isLoading:r}=(0,n.I)({queryKey:["/api/personas"],queryFn:async()=>{let e=await fetch("/api/personas");return(await e.json()).personas||[]}}),o=(0,C.n)({mutationFn:async e=>{let{maxEmails:s=50}=e;return(await fetch("/api/personas/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({maxEmails:s})})).json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/personas"]}),s(!1)},onError:()=>{s(!1)}}),m=()=>{s(!0),o.mutate({maxEmails:100})};return r?(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Email Personas"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading persona profiles..."})]})}),(0,t.jsx)("div",{className:"grid gap-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-48 bg-gray-200 animate-pulse rounded-lg"},e))})]}):(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"h-6 w-6"}),"Email Personas"]}),(0,t.jsx)("p",{className:"text-gray-600",children:"AI-generated customer personas based on email conversation history"})]}),(0,t.jsx)(g.$,{onClick:m,disabled:e,className:"bg-blue-600 hover:bg-blue-700 text-white",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing Emails..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Analyze Email History"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Personas"}),(0,t.jsx)("p",{className:"text-xl font-semibold",children:(null==i?void 0:i.length)||0})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(W.A,{className:"h-4 w-4 text-green-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"High Engagement"}),(0,t.jsx)("p",{className:"text-xl font-semibold",children:(null==i?void 0:i.filter(e=>e.engagementScore>=70).length)||0})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"h-4 w-4 text-purple-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Investors"}),(0,t.jsx)("p",{className:"text-xl font-semibold",children:(null==i?void 0:i.filter(e=>"investor"===e.profileType).length)||0})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-4 w-4 text-orange-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Active Conversations"}),(0,t.jsx)("p",{className:"text-xl font-semibold",children:(null==i?void 0:i.filter(e=>e.interactionCount>=5).length)||0})]})]})})})]}),i&&i.length>0?(0,t.jsx)("div",{className:"grid gap-6",children:i.map(e=>{var s;let a=(s=e.engagementScore)>=80?{label:"Very High",color:"text-green-600"}:s>=60?{label:"High",color:"text-blue-600"}:s>=40?{label:"Medium",color:"text-yellow-600"}:{label:"Low",color:"text-red-600"};return(0,t.jsxs)(c.Zp,{className:"border-l-4 border-l-blue-500",children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.ZB,{className:"text-lg",children:e.name}),(0,t.jsx)(c.BT,{className:"text-sm text-gray-600",children:e.email})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(j.E,{className:(e=>{switch(e){case"investor":return"bg-green-100 text-green-800 border-green-200";case"customer":return"bg-blue-100 text-blue-800 border-blue-200";case"consultation":return"bg-purple-100 text-purple-800 border-purple-200";case"referral":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.profileType),children:e.profileType}),(0,t.jsxs)(j.E,{variant:"outline",className:a.color,children:[a.label," Engagement"]})]})]})}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Engagement Score"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[e.engagementScore,"/100"]})]}),(0,t.jsx)(b.k,{value:e.engagementScore,className:"h-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Persona Summary"}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.personaSummary})]}),(0,t.jsx)(q.w,{}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[e.keyInterests&&e.keyInterests.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[(0,t.jsx)(W.A,{className:"h-3 w-3"}),"Key Interests"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.keyInterests.map((e,s)=>(0,t.jsx)(j.E,{variant:"secondary",className:"text-xs",children:e},s))})]}),e.immigrationNeeds&&e.immigrationNeeds.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Immigration Needs"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.immigrationNeeds.map((e,s)=>(0,t.jsx)(j.E,{variant:"outline",className:"text-xs",children:e},s))})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[(0,t.jsx)(z.A,{className:"h-3 w-3"}),"Communication Style"]}),(0,t.jsx)(j.E,{variant:"outline",children:e.communicationStyle})]}),e.businessContext&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[(0,t.jsx)(L.A,{className:"h-3 w-3"}),"Business Context"]}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.businessContext})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[(0,t.jsx)(D.A,{className:"h-3 w-3"}),"Interaction Stats"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,t.jsxs)("p",{children:[e.interactionCount," conversations"]}),(0,t.jsxs)("p",{children:["Last contact: ",new Date(e.lastInteraction).toLocaleDateString()]})]})]})]})]}),e.painPoints&&e.painPoints.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Pain Points"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.painPoints.map((e,s)=>(0,t.jsx)(j.E,{variant:"destructive",className:"text-xs",children:e},s))})]})]})]},e.id)})}):(0,t.jsx)(c.Zp,{className:"text-center py-12",children:(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)(d.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Personas Found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:'Click "Analyze Email History" to generate AI-powered personas from your Gmail conversations.'}),(0,t.jsx)(g.$,{onClick:m,disabled:e,children:e?"Analyzing...":"Start Analysis"})]})})]})}function O(){let[e,s]=(0,l.useState)("overview"),{data:a}=(0,n.I)({queryKey:["/api/dashboard/stats"],queryFn:()=>i.F.getDashboardStats()}),{data:r}=(0,n.I)({queryKey:["/api/contacts"],queryFn:()=>fetch("/api/contacts").then(e=>e.json())}),d=47,o=8,x=3200,m=156,h=87.3;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:"⚡"}),(0,t.jsx)("span",{children:"Daily Operations Dashboard"})]}),(0,t.jsxs)(c.BT,{children:["Today's activities and automation performance • ",new Date().toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(j.E,{variant:"outline",className:"bg-green-50 text-green-700",children:"System Healthy"}),(0,t.jsx)(j.E,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"All Agents Active"})]})]})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Today's Leads"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:d}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:"+12% vs yesterday"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"AI Responses"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:m}),(0,t.jsxs)("p",{className:"text-sm opacity-90",children:[h,"% success rate"]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Conversions"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:o}),(0,t.jsxs)("p",{className:"text-sm opacity-90",children:["$",x," revenue"]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Growth Rate"}),(0,t.jsxs)("p",{className:"text-3xl font-bold",children:["+",10.5,"%"]}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:"Week over week"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3 mb-6",children:[(0,t.jsx)(g.$,{onClick:()=>s("agent"),variant:"agent"===e?"default":"outline",children:"\uD83E\uDD16 Agent Control"}),(0,t.jsx)(g.$,{onClick:()=>s("conversion"),variant:"conversion"===e?"default":"outline",children:"\uD83C\uDFAF Conversion"}),(0,t.jsx)(g.$,{onClick:()=>s("contacts"),variant:"contacts"===e?"default":"outline",children:"\uD83D\uDCE7 Gmail Extraction"}),(0,t.jsx)(g.$,{onClick:()=>s("personas"),variant:"personas"===e?"default":"outline",children:"\uD83D\uDC65 Personas"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3",children:"System Performance"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"text-sm",children:"API Response Time"}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:"142ms"})]}),(0,t.jsx)(b.k,{value:85,className:"h-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"text-sm",children:"Lead Processing"}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:"94%"})]}),(0,t.jsx)(b.k,{value:94,className:"h-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"text-sm",children:"Email Integration"}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:"98%"})]}),(0,t.jsx)(b.k,{value:98,className:"h-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"text-sm",children:"Agent Uptime"}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:"99.7%"})]}),(0,t.jsx)(b.k,{value:99.7,className:"h-2"})]})]})]})]})]}),"overview"===e&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"\uD83D\uDCC8 Today's Activity Timeline"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm",children:"9:00 AM - Sent daily investor update"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"28 investors notified"})]}),(0,t.jsx)(j.E,{className:"bg-green-100 text-green-800",children:"Completed"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm",children:"10:30 AM - Agent responded to 23 leads"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Reddit, LinkedIn, Discord"})]}),(0,t.jsx)(j.E,{className:"bg-green-100 text-green-800",children:"Completed"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm",children:"2:15 PM - Gmail scan extracted 12 contacts"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"3 investors, 4 lawyers, 2 employers"})]}),(0,t.jsx)(j.E,{className:"bg-green-100 text-green-800",children:"Completed"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm",children:"4:45 PM - Updated 34 personas"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"AI analysis complete"})]}),(0,t.jsx)(j.E,{className:"bg-blue-100 text-blue-800",children:"In Progress"})]})]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"\uD83C\uDFAF Performance Highlights"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-green-900",children:"Top Converting Platform"}),(0,t.jsx)("p",{className:"text-green-700",children:"Reddit - 23.4% conversion rate"}),(0,t.jsx)("p",{className:"text-xs text-green-600",children:"+5.2% from last week"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-900",children:"Best Response Time"}),(0,t.jsx)("p",{className:"text-blue-700",children:"Average 4.2 minutes"}),(0,t.jsx)("p",{className:"text-xs text-blue-600",children:"Target: <5 minutes"})]}),(0,t.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-purple-900",children:"Revenue Growth"}),(0,t.jsx)("p",{className:"text-purple-700",children:"$44K MRR (+18.7%)"}),(0,t.jsx)("p",{className:"text-xs text-purple-600",children:"Exceeding $40K target"})]})]})})]})]}),"agent"===e&&(0,t.jsx)(f.s,{}),"conversion"===e&&(0,t.jsx)(y.A,{}),"contacts"===e&&(0,t.jsx)(B,{}),"personas"===e&&(0,t.jsx)($,{})]})}var M=a(90368),K=a(27937);function _(){let[e,s]=(0,l.useState)("pending"),[a,r]=(0,l.useState)(1),[d]=(0,l.useState)(25),{data:o,isLoading:x}=(0,n.I)({queryKey:["/api/leads/with-responses"],queryFn:()=>i.F.getLeadsWithResponses(),refetchInterval:12e4}),m=(0,C.n)({mutationFn:async()=>(await fetch("/api/reddit/check-responses",{method:"POST",headers:{"Content-Type":"application/json"}})).json(),onSuccess:()=>{Z.qQ.invalidateQueries({queryKey:["/api/leads/with-responses"]})}}),h=(0,C.n)({mutationFn:async e=>{let{leadId:s,message:a}=e;return(await fetch("/api/reddit/follow-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:s,message:a})})).json()},onSuccess:()=>{Z.qQ.invalidateQueries({queryKey:["/api/leads/with-responses"]})}}),u=(o||[]).filter(e=>"reddit"===e.sourcePlatform).map(e=>{var s,a,t;let l,n,i=(null==(s=e.responses)?void 0:s.length)||0;return(null==(a=e.title)?void 0:a.toLowerCase().includes("signup"))||(null==(t=e.title)?void 0:t.toLowerCase().includes("converted"))?(l="converted",n="converted"):i>2?(l="engaged",n="evaluating"):i>0?(l="responded",n="interested"):(l="pending",n="initial"),{...e,responseStatus:l,conversionStage:n,userReplied:i>0}}),p=e=>u.filter(s=>s.responseStatus===e);(0,l.useEffect)(()=>{r(1)},[e]);let v=p(e),N=v.length,b=Math.ceil(N/d),y=(a-1)*d,f=y+d,w=v.slice(y,f),A={pending:p("pending").length,responded:p("responded").length,engaged:p("engaged").length,converted:p("converted").length},k=o||[],S=k.reduce((e,s)=>{var a;return e+((null==(a=s.responses)?void 0:a.length)||0)},0),R=u.reduce((e,s)=>{var a;return e+((null==(a=s.responses)?void 0:a.length)||0)},0),P=k.filter(e=>"twitter"===e.sourcePlatform).reduce((e,s)=>{var a;return e+((null==(a=s.responses)?void 0:a.length)||0)},0),E={totalRedditResponses:R,totalAllPlatformResponses:S,responseBreakdown:{reddit:R,twitter:P,whatsapp:S-R-P}};return x?(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"Reddit Response Tracker"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-16 bg-gray-200 rounded"},e))})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDC40"}),(0,t.jsx)("span",{children:"Reddit Response Monitoring"}),(0,t.jsx)("span",{className:"text-green-600 text-sm",children:"✅ Goal Achieved"})]}),(0,t.jsx)(c.BT,{children:"Track Reddit lead responses and guide them to N400/H1B conversion • Auto follow-up includes video resource and service guidance"})]}),(0,t.jsx)(g.$,{onClick:()=>m.mutate(),disabled:m.isPending,variant:"outline",children:m.isPending?"Checking...":"\uD83D\uDD04 Check Responses"})]})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border-2 border-green-200",children:[(0,t.jsx)("h3",{className:"text-green-900 font-semibold mb-2",children:"\uD83C\uDFAF Database Response Tracking"}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:E.totalRedditResponses}),(0,t.jsx)("p",{className:"text-sm text-green-700",children:"Reddit Responses"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:E.responseBreakdown.twitter}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"Twitter Responses"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:"Auto"}),(0,t.jsx)("p",{className:"text-sm text-orange-700",children:"Follow-ups Enabled"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:E.totalAllPlatformResponses}),(0,t.jsx)("p",{className:"text-sm text-purple-700",children:"Total All Platforms"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 rounded-lg cursor-pointer transition-all ".concat("pending"===e?"ring-2 ring-yellow-500 bg-yellow-50":"bg-yellow-50 hover:bg-yellow-100"),onClick:()=>s("pending"),children:[(0,t.jsx)("h3",{className:"font-semibold text-yellow-900",children:"Awaiting Response"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:A.pending}),(0,t.jsx)("p",{className:"text-sm text-yellow-700",children:"Need follow-up"})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg cursor-pointer transition-all ".concat("responded"===e?"ring-2 ring-blue-500 bg-blue-50":"bg-blue-50 hover:bg-blue-100"),onClick:()=>s("responded"),children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-900",children:"Responded"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:A.responded}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"Users replied"})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg cursor-pointer transition-all ".concat("engaged"===e?"ring-2 ring-purple-500 bg-purple-50":"bg-purple-50 hover:bg-purple-100"),onClick:()=>s("engaged"),children:[(0,t.jsx)("h3",{className:"font-semibold text-purple-900",children:"Engaged"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:A.engaged}),(0,t.jsx)("p",{className:"text-sm text-purple-700",children:"In conversation"})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg cursor-pointer transition-all ".concat("converted"===e?"ring-2 ring-green-500 bg-green-50":"bg-green-50 hover:bg-green-100"),onClick:()=>s("converted"),children:[(0,t.jsx)("h3",{className:"font-semibold text-green-900",children:"Converted"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:A.converted}),(0,t.jsx)("p",{className:"text-sm text-green-700",children:"N400/H1B signups"})]})]})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.ZB,{className:"capitalize break-words",children:[e," Reddit Leads"]}),(0,t.jsxs)(c.BT,{className:"break-words",children:["Showing ",y+1,"-",Math.min(f,N)," of ",N," leads in this stage"]})]}),b>1&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(g.$,{variant:"outline",size:"sm",onClick:()=>r(Math.max(1,a-1)),disabled:1===a,children:[(0,t.jsx)(M.A,{className:"w-4 h-4 mr-1"}),"Previous"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",a," of ",b]}),(0,t.jsxs)(g.$,{variant:"outline",size:"sm",onClick:()=>r(Math.min(b,a+1)),disabled:a===b,children:["Next",(0,t.jsx)(K.A,{className:"w-4 h-4 ml-1"})]})]})]})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[w.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 truncate",children:e.title}),(0,t.jsx)(j.E,{className:(e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"responded":return"bg-blue-100 text-blue-800";case"engaged":return"bg-purple-100 text-purple-800";case"converted":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.responseStatus),children:e.responseStatus}),(0,t.jsx)(j.E,{className:(e=>{switch(e){case"initial":default:return"bg-gray-100 text-gray-800";case"interested":return"bg-blue-100 text-blue-800";case"evaluating":return"bg-yellow-100 text-yellow-800";case"ready":return"bg-orange-100 text-orange-800";case"converted":return"bg-green-100 text-green-800"}})(e.conversionStage),children:e.conversionStage})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 truncate mb-2",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["Score: ",Number(e.aiScore||0).toFixed(1)]}),(0,t.jsxs)("span",{children:["Posted: ",new Date(e.discoveredAt).toLocaleDateString()]}),e.lastChecked&&(0,t.jsxs)("span",{children:["Checked: ",new Date(e.lastChecked).toLocaleTimeString()]}),e.userReplied&&(0,t.jsx)(j.E,{variant:"outline",className:"bg-green-50 text-green-700",children:"User Replied ✅"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(g.$,{size:"sm",variant:"outline",onClick:()=>window.open(e.sourceUrl,"_blank"),children:"View Post"}),"pending"===e.responseStatus&&(0,t.jsx)(g.$,{size:"sm",onClick:()=>(e=>{let s=["Hi! Just wanted to follow up on your immigration question. Have you had a chance to check out JustiGuide? We help with both N400 citizenship applications and H1B visa support. Here's a helpful video overview: https://www.loom.com/share/d27c93fa51b04c8abe6c121ea4e5c7ae - Would either service be helpful for your situation?","Hope this helps with your immigration journey! Whether you need H1B visa support or are ready for N400 citizenship, JustiGuide makes the process much easier. Check out this video for more details: https://www.loom.com/share/d27c93fa51b04c8abe6c121ea4e5c7ae - Which path are you considering?","Thanks for the great question! Many people in similar situations find JustiGuide helpful for both H1B visas and citizenship applications. Here's a video explaining our approach: https://www.loom.com/share/d27c93fa51b04c8abe6c121ea4e5c7ae - Both processes can be complex, but our platform guides you through every step."],a=s[Math.floor(Math.random()*s.length)];h.mutate({leadId:e,message:a})})(e.id),disabled:h.isPending,children:"Follow Up"}),"engaged"===e.responseStatus&&"converted"!==e.conversionStage&&(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(g.$,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>window.open("https://justiguide.com/h1b","_blank"),children:"H1B Support"}),(0,t.jsx)(g.$,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>window.open("https://justiguide.com/n400","_blank"),children:"N400 Citizenship"})]})]})]},e.id)),0===N&&(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsxs)("p",{children:["No ",e," leads found"]}),(0,t.jsx)("p",{className:"text-sm",children:"Reddit leads will appear here as they respond"})]})]}),b>1&&(0,t.jsxs)("div",{className:"border-t pt-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",y+1,"-",Math.min(f,N)," of ",N," ",e," leads"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(g.$,{variant:"outline",size:"sm",onClick:()=>r(Math.max(1,a-1)),disabled:1===a,children:[(0,t.jsx)(M.A,{className:"w-4 h-4 mr-1"}),"Previous"]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,b)},(e,s)=>{let l=Math.max(1,Math.min(b-4,a-2))+s;return(0,t.jsx)(g.$,{variant:a===l?"default":"ghost",size:"sm",onClick:()=>r(l),className:"w-10 h-8",children:l},l)})}),(0,t.jsxs)(g.$,{variant:"outline",size:"sm",onClick:()=>r(Math.min(b,a+1)),disabled:a===b,children:["Next",(0,t.jsx)(K.A,{className:"w-4 h-4 ml-1"})]})]})]})]})]})]})}var V=a(54679);function G(){var e,s,a,i,r,d,o,x,m,h,u,p,j,v,N,y,f,w,k,S;let[R,P]=(0,l.useState)(""),[E,F]=(0,l.useState)(!1),[L,T]=(0,l.useState)(""),{data:D,isLoading:I}=(0,n.I)({queryKey:["/api/outreach/channel-performance"],queryFn:async()=>{let e=await fetch("/api/outreach/channel-performance"),s=await e.json();return s.success?s:null},refetchInterval:6e4}),B=(0,C.n)({mutationFn:async e=>(await fetch("/api/outreach/orchestrate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e})})).json(),onSuccess:()=>{Z.qQ.invalidateQueries({queryKey:["/api/outreach/channel-performance"]})}});(0,C.n)({mutationFn:async e=>{let{leadId:s,channel:a,message:t}=e;return(await fetch("/api/outreach/execute-step",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:s,channel:a,message:t})})).json()},onSuccess:()=>{Z.qQ.invalidateQueries({queryKey:["/api/outreach/channel-performance"]})}});let q=async()=>{if(R)try{await B.mutateAsync(R),F(!1),P("")}catch(e){console.error("Orchestration failed:",e)}};return I?(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"\uD83C\uDFAF Multi-Channel Orchestration"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"\uD83C\uDFAF Multi-Channel Outreach Performance"}),(0,t.jsx)(c.BT,{children:"Optimized outreach sequences across Reddit, LinkedIn, email, WhatsApp, and phone"})]}),(0,t.jsx)(c.Wu,{children:D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==(a=D.summary)||null==(s=a.bestROI)||null==(e=s.channel)?void 0:e.toUpperCase())||"N/A"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Best ROI Channel"}),(0,t.jsxs)("div",{className:"text-xs text-green-600",children:[(null==(d=D.summary)||null==(r=d.bestROI)||null==(i=r.roi)?void 0:i.toFixed(1))||0,"x return"]})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==(m=D.summary)||null==(x=m.mostEffective)||null==(o=x.channel)?void 0:o.toUpperCase())||"N/A"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Highest Response Rate"}),(0,t.jsxs)("div",{className:"text-xs text-blue-600",children:[(100*((null==(p=D.summary)||null==(u=p.mostEffective)||null==(h=u.actual)?void 0:h.responseRate)||0)).toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null==(N=D.summary)||null==(v=N.mostCostEffective)||null==(j=v.channel)?void 0:j.toUpperCase())||"N/A"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Most Cost Effective"}),(0,t.jsxs)("div",{className:"text-xs text-purple-600",children:["$",(null==(k=D.summary)||null==(w=k.mostCostEffective)||null==(f=w.config)||null==(y=f.costPerLead)?void 0:y.toFixed(2))||0," per lead"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Channel Performance Details"}),(0,t.jsx)("div",{className:"grid gap-4",children:null==(S=D.performance)?void 0:S.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full ".concat({reddit:"bg-orange-500",linkedin:"bg-blue-500",email:"bg-green-500",whatsapp:"bg-emerald-500",phone:"bg-purple-500"}[e.channel]||"bg-gray-500")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium capitalize",children:e.channel}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.actual.totalLeads," leads • ",e.actual.totalResponses," responses"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[(100*e.actual.responseRate).toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Response Rate"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:["$",e.config.costPerLead.toFixed(2)]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Cost/Lead"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-sm font-medium ".concat((s=e.roi)>=10?"text-green-600":s>=5?"text-yellow-600":"text-red-600"),children:[e.roi.toFixed(1),"x"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"ROI"})]}),(0,t.jsxs)("div",{className:"w-20",children:[(0,t.jsx)(b.k,{value:Math.min(100*e.efficiency,100),className:"h-2"}),(0,t.jsxs)("div",{className:"text-xs text-center mt-1",children:[(100*e.efficiency).toFixed(0),"% efficiency"]})]})]})]},e.channel)})})]})]}):(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,t.jsx)("p",{children:"No channel performance data available"})})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"\uD83D\uDE80 Outreach Orchestration"}),(0,t.jsx)(c.BT,{children:"Create optimized multi-channel sequences based on lead characteristics"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(g.$,{onClick:()=>F(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Create Outreach Sequence"}),(0,t.jsx)(g.$,{variant:"outline",onClick:()=>Z.qQ.invalidateQueries({queryKey:["/api/outreach/channel-performance"]}),children:"Refresh Performance Data"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"\uD83D\uDEA8 Urgent H1B Sequence"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("div",{children:"Day 0: Email (urgent_h1b)"}),(0,t.jsx)("div",{children:"Day 0: WhatsApp (urgent_h1b)"}),(0,t.jsx)("div",{children:"Day 1: Phone (consultation_offer)"})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-green-600",children:"70% expected response rate"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"\uD83D\uDCBC B2B Lawyer Sequence"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("div",{children:"Day 0: LinkedIn (initial_response)"}),(0,t.jsx)("div",{children:"Day 2: Email (value_proposition)"}),(0,t.jsx)("div",{children:"Day 5: Phone (consultation_offer)"})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-green-600",children:"65% expected response rate"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"\uD83C\uDFC6 Premium Client Sequence"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("div",{children:"Day 0: LinkedIn (initial_response)"}),(0,t.jsx)("div",{children:"Day 1: Email (value_proposition)"}),(0,t.jsx)("div",{children:"Day 3: Phone (consultation_offer)"}),(0,t.jsx)("div",{children:"Day 5: WhatsApp (follow_up)"})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-green-600",children:"70% expected response rate"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"\uD83D\uDCDD N400 Citizenship Sequence"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("div",{children:"Day 0: Reddit (initial_response)"}),(0,t.jsx)("div",{children:"Day 2: Email (value_proposition)"}),(0,t.jsx)("div",{children:"Day 5: LinkedIn (case_study)"})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-green-600",children:"30% expected response rate"})]})]})]})})]}),(0,t.jsx)(V.lG,{open:E,onOpenChange:F,children:(0,t.jsxs)(V.Cf,{children:[(0,t.jsxs)(V.c7,{children:[(0,t.jsx)(V.L3,{children:"Create Outreach Sequence"}),(0,t.jsx)(V.rr,{children:"Generate an optimized multi-channel outreach sequence for a specific lead"})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Lead ID"}),(0,t.jsx)(A.p,{placeholder:"Enter lead ID",value:R,onChange:e=>P(e.target.value)})]})}),(0,t.jsxs)(V.Es,{children:[(0,t.jsx)(g.$,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,t.jsx)(g.$,{onClick:q,disabled:!R||B.isPending,children:B.isPending?"Creating...":"Create Sequence"})]})]})})]})}var H=a(67001),U=a(47507);function Q(){let[e,s]=(0,l.useState)(""),[a,r]=(0,l.useState)("initial"),[d,o]=(0,l.useState)(!1),[x,m]=(0,l.useState)(!1),[h,u]=(0,l.useState)(""),[p,N]=(0,l.useState)(null),[b,y]=(0,l.useState)(null),{data:f,isLoading:w}=(0,n.I)({queryKey:["/api/leads"],queryFn:()=>i.F.getLeads()}),k=(0,C.n)({mutationFn:async e=>{let{leadId:s,type:a}=e;return(await fetch("/api/ai/generate-response",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:s,responseType:a})})).json()},onSuccess:e=>{e.success&&(N(e.response),o(!0))}}),S=(0,C.n)({mutationFn:async e=>(await fetch("/api/ai/validate-response",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responseText:e})})).json(),onSuccess:e=>{e.success&&(y(e.validation),m(!0))}});(0,C.n)({mutationFn:async e=>(await fetch("/api/ai/generate-batch-responses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadIds:e,responseType:a})})).json(),onSuccess:()=>{Z.qQ.invalidateQueries({queryKey:["/api/leads"]})}});let R=async()=>{if(e)try{await k.mutateAsync({leadId:e,type:a})}catch(e){console.error("Response generation failed:",e)}},P=async()=>{if(h.trim())try{await S.mutateAsync(h)}catch(e){console.error("Validation failed:",e)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"⚖️ Legally Compliant AI Response Generator"}),(0,t.jsx)(c.BT,{children:"Generate immigration-compliant responses with automatic legal disclaimers and outcome language restrictions"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Lead ID"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(U.l6,{value:e,onValueChange:s,children:[(0,t.jsx)(U.bq,{children:(0,t.jsx)(U.yv,{placeholder:"Select lead from database"})}),(0,t.jsx)(U.gC,{children:null==f?void 0:f.slice(0,50).map(e=>(0,t.jsx)(U.eb,{value:e.id,children:(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsxs)("span",{className:"font-medium text-sm",children:[e.title.slice(0,50),"..."]}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[e.sourcePlatform," • ",new Date(e.discoveredAt).toLocaleDateString()]})]})},e.id))})]}),(0,t.jsx)(A.p,{placeholder:"Or enter lead ID manually",value:e,onChange:e=>s(e.target.value),className:"text-xs"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Response Type"}),(0,t.jsxs)(U.l6,{value:a,onValueChange:r,children:[(0,t.jsx)(U.bq,{children:(0,t.jsx)(U.yv,{placeholder:"Select response type"})}),(0,t.jsxs)(U.gC,{children:[(0,t.jsx)(U.eb,{value:"initial",children:"Initial Response"}),(0,t.jsx)(U.eb,{value:"follow_up",children:"Follow-up"}),(0,t.jsx)(U.eb,{value:"consultation",children:"Consultation Offer"}),(0,t.jsx)(U.eb,{value:"urgent",children:"Urgent Response"})]})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)(g.$,{onClick:R,disabled:!e||k.isPending,className:"w-full",children:k.isPending?"Generating...":"Generate Response"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDCCB Compliance Features"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm",children:"Automatic legal disclaimers"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm",children:"Outcome language restrictions"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm",children:"Visa-specific warnings (H1B cap, etc.)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm",children:"Professional consultation recommendations"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDEAB Prohibited Terms"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["guarantee","definitely","ensure","promise","certain","will get"].map(e=>(0,t.jsx)(j.E,{variant:"destructive",className:"text-xs",children:e},e))}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"These terms are automatically replaced with compliant alternatives"})]})]})]})]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"✅ Response Validation"}),(0,t.jsx)(c.BT,{children:"Validate custom responses for legal compliance before sending"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Response Text"}),(0,t.jsx)(H.T,{placeholder:"Paste your response text here for compliance validation...",value:h,onChange:e=>u(e.target.value),rows:6})]}),(0,t.jsx)(g.$,{onClick:P,disabled:!h.trim()||S.isPending,children:S.isPending?"Validating...":"Validate Compliance"})]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"\uD83D\uDCC4 Compliance Templates"}),(0,t.jsx)(c.BT,{children:"Pre-approved response templates for different immigration scenarios"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)(v.tU,{defaultValue:"h1b",className:"w-full",children:[(0,t.jsxs)(v.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(v.Xi,{value:"h1b",children:"H1B Responses"}),(0,t.jsx)(v.Xi,{value:"n400",children:"N400 Citizenship"}),(0,t.jsx)(v.Xi,{value:"general",children:"General Immigration"}),(0,t.jsx)(v.Xi,{value:"b2b",children:"B2B Lawyers"})]}),(0,t.jsx)(v.av,{value:"h1b",className:"space-y-4",children:(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Standard H1B Response"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:'"I understand H1B applications can be complex. Each case requires individual assessment, and approvals depend on USCIS discretion and annual cap availability..."'}),(0,t.jsx)(j.E,{className:"text-xs",children:"Includes H1B cap disclaimer"})]})}),(0,t.jsx)(v.av,{value:"n400",className:"space-y-4",children:(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"N400 Citizenship Response"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:'"Naturalization eligibility depends on multiple factors including continuous residence and background checks. Each application is reviewed individually..."'}),(0,t.jsx)(j.E,{className:"text-xs",children:"Includes residency requirements"})]})}),(0,t.jsx)(v.av,{value:"general",className:"space-y-4",children:(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"General Immigration Response"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:'"Immigration matters require personalized guidance. This information is for general educational purposes only and doesn\'t constitute legal advice..."'}),(0,t.jsx)(j.E,{className:"text-xs",children:"Standard legal disclaimer"})]})}),(0,t.jsx)(v.av,{value:"b2b",className:"space-y-4",children:(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"B2B Lawyer Outreach"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:'"I work with immigration law practices to develop efficient client management systems while maintaining the highest standards of legal compliance..."'}),(0,t.jsx)(j.E,{className:"text-xs",children:"Professional services focus"})]})})]})})]}),(0,t.jsx)(V.lG,{open:d,onOpenChange:o,children:(0,t.jsxs)(V.Cf,{className:"max-w-4xl",children:[(0,t.jsxs)(V.c7,{children:[(0,t.jsx)(V.L3,{children:"Generated Compliant Response"}),(0,t.jsx)(V.rr,{children:"Review the AI-generated response with compliance validation"})]}),p&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Full Response"}),(0,t.jsx)("div",{className:"text-sm whitespace-pre-wrap bg-gray-50 p-3 rounded",children:p.fullResponse})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h5",{className:"font-medium text-sm",children:"Response Components"}),(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Greeting:"})," ",p.greeting.substring(0,50),"..."]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Acknowledgment:"})," ",p.acknowledgment.substring(0,50),"..."]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Value:"})," ",p.value.substring(0,50),"..."]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"CTA:"})," ",p.cta.substring(0,50),"..."]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h5",{className:"font-medium text-sm",children:"Compliance Status"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm",children:"Legal disclaimer included"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm",children:"Prohibited terms sanitized"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm",children:"Visa-specific warnings added"})]})]})]})]}),(0,t.jsxs)(V.Es,{children:[(0,t.jsx)(g.$,{variant:"outline",onClick:()=>o(!1),children:"Close"}),(0,t.jsx)(g.$,{onClick:()=>{p&&navigator.clipboard.writeText(p.fullResponse)},children:"Copy Response"})]})]})}),(0,t.jsx)(V.lG,{open:x,onOpenChange:m,children:(0,t.jsxs)(V.Cf,{children:[(0,t.jsxs)(V.c7,{children:[(0,t.jsx)(V.L3,{children:"Compliance Validation Result"}),(0,t.jsx)(V.rr,{children:"Review compliance issues and recommendations"})]}),b&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"p-4 border rounded-lg ".concat(b.isCompliant?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,t.jsx)("div",{className:"font-medium ".concat(b.isCompliant?"text-green-600":"text-red-600"),children:b.isCompliant?"✅ Response is compliant":"❌ Compliance issues detected"})}),b.issues.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Issues to Address:"}),(0,t.jsx)("ul",{className:"space-y-1",children:b.issues.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-red-600 flex items-start gap-2",children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e})]},s))})]})]}),(0,t.jsx)(V.Es,{children:(0,t.jsx)(g.$,{onClick:()=>m(!1),children:"Close"})})]})})]})}var J=a(59960),X=a(57968),Y=a(37586),ee=a(93499),es=a(1524),ea=a(28171);function et(){let[e,s]=(0,l.useState)(null),[a,n]=(0,l.useState)(!0),{toast:i}=(0,ea.dj)();(0,l.useEffect)(()=>{r()},[]);let r=async()=>{try{let e=await fetch("/api/immigration/subreddits"),a=await e.json();s(a)}catch(e){console.error("Failed to fetch immigration channels:",e),i({title:"Failed to load channels",description:"Could not fetch immigration subreddit information",variant:"destructive"})}finally{n(!1)}};return a?(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"flex items-center",children:[(0,t.jsx)(Y.A,{className:"h-5 w-5 mr-2 text-orange-500"}),"Reddit Immigration Channels"]})}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})})]}):e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(Y.A,{className:"h-5 w-5 mr-2 text-orange-500"}),"Reddit Immigration Channels"]}),(0,t.jsxs)(j.E,{variant:"outline",className:"text-green-600 border-green-600",children:[(0,t.jsx)(E.A,{className:"h-3 w-3 mr-1"}),e.totalChannels," Active"]})]})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.totalChannels}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Channels"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:e.newChannelsAdded.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Newly Added"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.focusAreas.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Focus Areas"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"New Channels Added:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.newChannelsAdded.map(e=>(0,t.jsxs)(j.E,{variant:"secondary",className:"bg-green-100 text-green-700",children:["r/",e]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Focus Areas:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.focusAreas.map(e=>(0,t.jsxs)(j.E,{variant:"outline",className:"text-purple-600 border-purple-600",children:[(0,t.jsx)(W.A,{className:"h-3 w-3 mr-1"}),e]},e))})]})]})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"flex items-center",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"Active Subreddits"]})}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"grid gap-4",children:e.subreddits.map(s=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg text-orange-600",children:["r/",s.name]}),e.newChannelsAdded.includes(s.name)&&(0,t.jsx)(j.E,{className:"ml-2 bg-green-100 text-green-700",children:"NEW"})]}),(0,t.jsx)(g.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,t.jsx)("a",{href:"https://reddit.com/r/".concat(s.name),target:"_blank",rel:"noopener noreferrer",children:(0,t.jsx)(ee.A,{className:"h-4 w-4"})})})]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:s.description}),(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[(0,t.jsx)(es.A,{className:"h-4 w-4 mr-1 text-blue-500"}),(0,t.jsx)("span",{className:"text-blue-600 font-medium",children:s.focus})]})]},s.name))})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"High-Value Keywords"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-3",children:e.highValueKeywords.map(e=>(0,t.jsxs)("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg",children:[(0,t.jsx)(W.A,{className:"h-4 w-4 mr-2 text-blue-600"}),(0,t.jsx)("span",{className:"font-medium text-blue-800",children:e})]},e))})})]})]}):(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"flex items-center text-red-600",children:[(0,t.jsx)(F.A,{className:"h-5 w-5 mr-2"}),"Failed to Load Channels"]})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Unable to load immigration subreddit information."}),(0,t.jsx)(g.$,{onClick:r,className:"mt-3",children:"Retry"})]})]})}var el=a(89066),en=a(39068),ei=a(37107),er=a(85921),ec=a(85710);function ed(){let[e,s]=(0,l.useState)(!1),[a,i]=(0,l.useState)(0),{toast:r}=(0,ea.dj)(),d=(0,w.jE)(),{data:o,isLoading:x}=(0,n.I)({queryKey:["/api/apify/status"],refetchInterval:3e4}),m=(0,C.n)({mutationFn:()=>(0,Z.AT)("/api/apify/initialize",{method:"POST"}),onSuccess:()=>{r({title:"Apify Initialized",description:"Enhanced data collection service is ready"}),d.invalidateQueries({queryKey:["/api/apify/status"]})},onError:e=>{r({title:"Initialization Failed",description:e.message||"Failed to initialize Apify service",variant:"destructive"})}}),h=(0,C.n)({mutationFn:()=>(0,Z.AT)("/api/apify/collect-leads",{method:"POST"}),onSuccess:e=>{let a=e.data;r({title:"Lead Collection Complete",description:"Collected ".concat(a.collected," leads, stored ").concat(a.stored,". Quality score: ").concat(a.qualityScore,"%")}),d.invalidateQueries({queryKey:["/api/leads"]}),d.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s(!1),i(0)},onError:e=>{r({title:"Collection Failed",description:e.message||"Failed to collect enhanced leads",variant:"destructive"}),s(!1),i(0)}}),u=async()=>{s(!0),i(0);let e=setInterval(()=>{i(s=>s>=90?(clearInterval(e),90):s+15*Math.random())},500);h.mutate()},p=[{name:"Reddit",icon:Y.A,color:"bg-orange-500"},{name:"LinkedIn",icon:en.A,color:"bg-blue-600"},{name:"Twitter",icon:ei.A,color:"bg-sky-500"},{name:"Facebook",icon:en.A,color:"bg-blue-700"},{name:"Instagram",icon:ei.A,color:"bg-pink-500"},{name:"TikTok",icon:er.A,color:"bg-black"}];return x?(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ec.A,{className:"h-5 w-5"}),"Enhanced Data Collection"]})}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(R.A,{className:"h-6 w-6 animate-spin"})})})]}):(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ec.A,{className:"h-5 w-5"}),"Enhanced Data Collection"]}),(0,t.jsx)(c.BT,{children:"Advanced multi-platform lead scraping with Apify"})]}),(0,t.jsxs)(c.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full ".concat((null==o?void 0:o.status)==="operational"?"bg-green-500":(null==o?void 0:o.status)==="degraded"?"bg-yellow-500":(null==o?void 0:o.status)==="invalid_key"?"bg-orange-500":"bg-red-500")}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Service Status: ",(null==o?void 0:o.status)==="operational"?"Operational":(null==o?void 0:o.status)==="degraded"?"Degraded":(null==o?void 0:o.status)==="invalid_key"?"Invalid API Key":(null==o?void 0:o.status)==="not_configured"?"Not Configured":"Unknown"]})]}),(null==o?void 0:o.status)!=="operational"&&(0,t.jsx)(g.$,{onClick:()=>m.mutate(),disabled:m.isPending,size:"sm","data-testid":"button-initialize",children:m.isPending?(0,t.jsx)(R.A,{className:"h-4 w-4 animate-spin"}):"Initialize"})]}),o&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Supported Platforms"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:p.map(e=>{let s=e.icon,a="Active"===o.capabilities[e.name.toLowerCase()];return(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-md bg-gray-50 dark:bg-gray-800",children:[(0,t.jsx)("div",{className:"p-1 rounded ".concat(e.color," text-white"),children:(0,t.jsx)(s,{className:"h-3 w-3"})}),(0,t.jsx)("span",{className:"text-xs font-medium",children:e.name}),(0,t.jsx)(j.E,{variant:a?"default":"secondary",className:"ml-auto text-xs",children:a?"Active":"Inactive"})]},e.name)})})]}),o&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.usage.totalDatasets}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Datasets"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.usage.recentActivity}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Activity"})]})]}),e&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Collecting leads..."}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[Math.round(a),"%"]})]}),(0,t.jsx)(b.k,{value:a,className:"h-2"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(g.$,{onClick:u,disabled:e||h.isPending||(null==o?void 0:o.status)!=="operational",className:"flex-1","data-testid":"button-collect",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.A,{className:"h-4 w-4 animate-spin mr-2"}),"Collecting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es.A,{className:"h-4 w-4 mr-2"}),"Collect Enhanced Leads"]})})}),o&&(0,t.jsxs)("div",{className:"pt-4 border-t",children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Enhanced Capabilities"}),(0,t.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,t.jsx)("li",{children:"• Multi-platform lead scraping"}),(0,t.jsx)("li",{children:"• Quality scoring and validation"}),(0,t.jsx)("li",{children:"• Engagement metrics analysis"}),(0,t.jsx)("li",{children:"• Real-time data collection"}),(0,t.jsx)("li",{children:"• Authentic source verification"})]})]})]})]})}var eo=a(27346),ex=a(86651),em=a(91761),eh=a(39347),eu=a(52056),ep=a(61362);let ej={high:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",low:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},eg={angel:"bg-purple-100 text-purple-800",vc:"bg-blue-100 text-blue-800",strategic:"bg-green-100 text-green-800",family_office:"bg-orange-100 text-orange-800",accelerator:"bg-pink-100 text-pink-800",government:"bg-gray-100 text-gray-800",foundation:"bg-indigo-100 text-indigo-800"};function ev(){let[e,s]=(0,l.useState)(100),[a,i]=(0,l.useState)(""),[r,o]=(0,l.useState)("all"),{data:x,isLoading:h,refetch:u}=(0,n.I)({queryKey:["/api/persona/extended-analysis",e],enabled:!0}),{data:p,isLoading:N}=(0,n.I)({queryKey:["/api/persona/investor-prospects"],enabled:!0}),y=()=>{u()};if(h||N)return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"grid gap-6",children:(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Analyzing Email Personas..."}),(0,t.jsxs)(c.BT,{children:["Processing ",e," email contacts for comprehensive persona insights"]})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)(b.k,{value:65,className:"h-2"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Identifying potential investors and categorizing contacts..."})]})]})})});let f=null==x?void 0:x.analysis;if(null==p||p.insights,!f)return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Enhanced Persona Analysis"}),(0,t.jsx)(c.BT,{children:"Analyze 100+ emails to identify target personas and potential investors"})]}),(0,t.jsx)(c.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Sample Size"}),(0,t.jsx)(A.p,{type:"number",value:e,onChange:e=>s(Number(e.target.value)),min:"50",max:"500",placeholder:"Number of emails to analyze"})]}),(0,t.jsx)(g.$,{onClick:y,className:"mt-6",children:"Start Analysis"})]})})]})});let w=f.personas||[],C=f.potentialInvestors||[],k=f.recommendations||[],R=w.filter(e=>{let s=e.category.toLowerCase().includes(a.toLowerCase())||e.keyCharacteristics.some(e=>e.toLowerCase().includes(a.toLowerCase())),t="all"===r||e.category===r;return s&&t}),P=C.filter(e=>e.confidence>60);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Enhanced Persona Analysis"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Analyzed ",f.totalAnalyzed," contacts • Found ",C.length," potential investors"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(j.E,{variant:"outline",className:"px-3 py-1",children:[w.length," Personas Identified"]}),(0,t.jsx)(g.$,{onClick:y,size:"sm",children:"Re-analyze"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{className:"pb-2",children:(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Total Contacts Analyzed"})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:f.totalAnalyzed}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Email contacts processed"})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{className:"pb-2",children:(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Potential Investors"})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:C.length}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[P.length," high confidence"]})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{className:"pb-2",children:(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"High-Value Personas"})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:w.filter(e=>e.avgRevenuePotential>1e4).length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"$10K+ revenue potential"})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{className:"pb-2",children:(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Avg Revenue Potential"})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:["$",Math.round(w.reduce((e,s)=>e+s.avgRevenuePotential,0)/w.length).toLocaleString()]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Per persona category"})]})]})]}),(0,t.jsxs)(v.tU,{defaultValue:"personas",className:"space-y-4",children:[(0,t.jsxs)(v.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(v.Xi,{value:"personas",children:"Persona Insights"}),(0,t.jsx)(v.Xi,{value:"investors",children:"Investor Prospects"}),(0,t.jsx)(v.Xi,{value:"recommendations",children:"Strategic Recommendations"}),(0,t.jsx)(v.Xi,{value:"analysis",children:"Detailed Analysis"})]}),(0,t.jsxs)(v.av,{value:"personas",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(ex.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(A.p,{placeholder:"Search personas...",value:a,onChange:e=>i(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("select",{value:r,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,t.jsx)("option",{value:"all",children:"All Categories"}),w.map(e=>e.category).filter((e,s,a)=>a.indexOf(e)===s).map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsx)("div",{className:"grid gap-4",children:R.map((e,s)=>(0,t.jsxs)(c.Zp,{className:"hover:shadow-lg transition-shadow",children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(d.A,{className:"h-6 w-6 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.ZB,{className:"text-lg",children:e.category}),(0,t.jsxs)(c.BT,{children:[e.count," contacts identified"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(j.E,{className:ej[e.riskProfile],children:[e.riskProfile," risk"]}),(0,t.jsxs)(j.E,{variant:"outline",children:["$",e.avgRevenuePotential.toLocaleString()]})]})]})}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium mb-2 flex items-center",children:[(0,t.jsx)(W.A,{className:"h-4 w-4 mr-2 text-blue-600"}),"Key Characteristics"]}),(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.keyCharacteristics.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium mb-2 flex items-center",children:[(0,t.jsx)(S.A,{className:"h-4 w-4 mr-2 text-green-600"}),"Communication Preferences"]}),(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.communicationPreferences.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]})]}),(0,t.jsx)("div",{className:"flex items-center justify-between pt-2 border-t",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Conversion: ",e.timeToConversion]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(em.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Avg Value: $",e.avgRevenuePotential.toLocaleString()]})]})]})}),e.examples.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2 text-sm",children:"Example Contacts:"}),(0,t.jsx)("div",{className:"space-y-1",children:e.examples.slice(0,2).map((e,s)=>(0,t.jsxs)("div",{className:"text-xs text-muted-foreground bg-muted/50 rounded p-2",children:[(0,t.jsx)("div",{className:"font-mono",children:e.email}),e.company&&(0,t.jsx)("div",{className:"text-xs",children:e.company})]},s))})]})]})]},s))})]}),(0,t.jsx)(v.av,{value:"investors",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(eh.A,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsx)("span",{children:"High-Confidence Investor Prospects"})]}),(0,t.jsx)(c.BT,{children:"Investors with 60%+ confidence score based on email patterns and keywords"})]}),(0,t.jsx)(c.Wu,{children:0===P.length?(0,t.jsxs)("div",{className:"text-center py-6 text-muted-foreground",children:[(0,t.jsx)(eu.A,{className:"h-12 w-12 mx-auto mb-2"}),(0,t.jsx)("p",{children:"No high-confidence investors found in current sample"}),(0,t.jsx)("p",{className:"text-xs",children:"Try increasing sample size or expanding email database"})]}):(0,t.jsx)("div",{className:"space-y-4",children:P.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-muted/50",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)(L.A,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.company})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Focus:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.investmentFocus.map((e,s)=>(0,t.jsx)(j.E,{variant:"secondary",className:"text-xs",children:e},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Check Size:"}),(0,t.jsx)("p",{className:"font-medium",children:e.checkSize})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,t.jsx)(j.E,{className:eg[e.type],children:e.type.toUpperCase()}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[e.confidence,"%"]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"confidence"})]})]})]}),(0,t.jsx)("div",{className:"mt-3 pt-3 border-t text-xs",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:e.email}),(0,t.jsx)("span",{className:"text-muted-foreground",children:e.geography})]})})]},s))})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{children:["All Potential Investors (",C.length,")"]}),(0,t.jsx)(c.BT,{children:"Complete list sorted by confidence score"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)(eo.F,{className:"h-96",children:(0,t.jsx)("div",{className:"space-y-2",children:C.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.E,{className:eg[e.type],variant:"outline",children:e.type}),(0,t.jsxs)("div",{className:"text-sm font-medium",children:[e.confidence,"%"]})]})]},s))})})})]})]})}),(0,t.jsx)(v.av,{value:"recommendations",className:"space-y-4",children:(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(ep.A,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("span",{children:"Strategic Recommendations"})]}),(0,t.jsx)(c.BT,{children:"AI-generated insights based on persona analysis"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:k.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)(es.A,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,t.jsx)("div",{className:"text-sm",children:e})]},s))})})]})}),(0,t.jsx)(v.av,{value:"analysis",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"Revenue Potential Distribution"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:w.slice(0,8).map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,t.jsx)("span",{children:e.category}),(0,t.jsxs)("span",{className:"font-medium",children:["$",e.avgRevenuePotential.toLocaleString()]})]}),(0,t.jsx)(b.k,{value:Math.min(e.avgRevenuePotential/25e3*100,100),className:"h-2"})]},s))})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"Risk Profile Analysis"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:["low","medium","high"].map(e=>{let s=w.filter(s=>s.riskProfile===e).length,a=Math.round(s/w.length*100);return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(j.E,{className:ej[e],children:[e," risk"]}),(0,t.jsxs)("span",{className:"text-sm",children:[s," personas"]})]}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[a,"%"]})]},e)})})})]})]})})]})]})}var eN=a(56154);function eb(){var e,s;let{toast:a}=(0,ea.dj)(),i=(0,w.jE)(),[r,o]=(0,l.useState)(new Set),{data:x}=(0,n.I)({queryKey:["/api/revenue/market-projections"],queryFn:async()=>{let e=await fetch("/api/revenue/market-projections");return e.ok?e.json():null},refetchInterval:3e5,retry:1}),{data:h}=(0,n.I)({queryKey:["/api/revenue/analytics"],queryFn:async()=>{let e=await fetch("/api/revenue/analytics");if(!e.ok)return null;let s=await e.json();return s.success?s:null},refetchInterval:3e5,retry:1}),{data:u,isError:p}=(0,n.I)({queryKey:["/api/solo/quick-metrics"],queryFn:async()=>{let e=await fetch("/api/solo/quick-metrics");if(!e.ok)return null;let s=await e.json();return s.success?s:null},refetchInterval:6e4,retry:1}),v=(()=>{if(!h||!h.serviceBreakdown)return[];let e=[],s=h.serviceBreakdown.find(e=>"d2c_n400"===e.service);s&&s.count>0&&e.push({priority:"high",action:"Direct N-400 platform promotion to ".concat(s.count," citizenship leads"),expectedRevenue:s.expectedRevenue,timeToComplete:"1-2 hours",conversionProbability:s.avgConversionProbability/100});let a=h.serviceBreakdown.find(e=>"b2b_nonimmigrant_worker"===e.service);a&&a.count>0&&e.push({priority:"high",action:"Lawyer referrals for ".concat(a.count," work visa cases"),expectedRevenue:a.expectedRevenue,timeToComplete:"1-2 hours",conversionProbability:a.avgConversionProbability/100});let t=h.serviceBreakdown.find(e=>"b2b_employment_auth"===e.service);t&&t.count>0&&e.push({priority:"urgent",action:"Fast-track ".concat(t.count," employment authorization cases"),expectedRevenue:t.expectedRevenue,timeToComplete:"30-60 minutes",conversionProbability:t.avgConversionProbability/100});let l=h.serviceBreakdown.find(e=>"b2b_alien_relative"===e.service);return l&&l.count>0&&e.push({priority:"medium",action:"Family case referrals for ".concat(l.count," leads"),expectedRevenue:l.expectedRevenue,timeToComplete:"1-2 hours",conversionProbability:l.avgConversionProbability/100}),e.sort((e,s)=>s.expectedRevenue*s.conversionProbability-e.expectedRevenue*e.conversionProbability)})(),N=(null==x?void 0:x.success)?x.totals.expectedRevenue:0,y=(0,C.n)({mutationFn:async e=>{let s="";return s=e.action.toLowerCase().includes("n-400")||e.action.toLowerCase().includes("citizenship")?"/api/nurturing/n400-campaign":e.action.toLowerCase().includes("lawyer")||e.action.toLowerCase().includes("work visa")?"/api/nurturing/lawyer-connection-campaign":e.action.toLowerCase().includes("follow-up")||e.action.toLowerCase().includes("systematic")?"/api/nurturing/systematic-follow-up":"/api/nurturing/conversion-campaign",(0,Z.AT)(s,{method:"POST",body:JSON.stringify({})})},onSuccess:(e,s)=>{a({title:"Action Started Successfully! \uD83D\uDE80",description:"".concat(s.action," is now running. Expected revenue: $").concat(Math.round(s.expectedRevenue).toLocaleString())}),i.invalidateQueries({queryKey:["/api/revenue/analytics"]})},onError:(e,s)=>{console.error("Action execution failed:",e),a({title:"Action Failed ❌",description:"Failed to start: ".concat(s.action,". Please try again."),variant:"destructive"})}}),f=async(e,s)=>{o(e=>new Set([...e,s]));try{await y.mutateAsync(e)}finally{o(e=>{let a=new Set(e);return a.delete(s),a})}},A=v.length>3?"4-6 hours":v.length>1?"2-4 hours":"1-2 hours",k=v.length>3?5:v.length>1?3:1.5,S=N>0?Math.round(N/k):0;return(0,t.jsxs)("div",{className:"space-y-6",children:[N>0&&(0,t.jsxs)(c.Zp,{className:"border-green-200 bg-green-50",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(em.A,{className:"h-5 w-5 text-green-600"}),"Revenue Opportunity"]}),(0,t.jsx)(c.BT,{children:"Expected revenue from current pipeline actions (Last 30 Days)"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-green-700 mb-2",children:["$",(N/1e6).toFixed(1),"M"]}),(0,t.jsxs)("p",{className:"text-sm text-green-600",children:["Total pipeline across ",(null==h||null==(e=h.totalLeads)?void 0:e.toLocaleString())||0," active leads"]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-green-600",children:"Time Investment:"}),(0,t.jsxs)("p",{className:"font-semibold",children:[A," focused work"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-green-600",children:"ROI Estimate:"}),(0,t.jsxs)("p",{className:"font-semibold",children:["~$",S.toLocaleString(),"/hour"]})]})]})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(eN.A,{className:"h-5 w-5 text-blue-500"}),"Priority Conversion Actions"]}),(0,t.jsx)(c.BT,{children:"Ranked by expected value (revenue \xd7 conversion probability)"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:v.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((e=>{switch(e){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-blue-500";default:return"bg-gray-500"}})(e.priority))}),(0,t.jsx)(j.E,{variant:(e=>{switch(e){case"urgent":return"destructive";case"high":return"default";default:return"secondary"}})(e.priority),children:e.priority})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["$",Math.round(e.expectedRevenue).toLocaleString()]}),(0,t.jsx)("p",{className:"text-xs text-black",children:"expected value"})]})]}),(0,t.jsx)("h4",{className:"font-semibold text-black mb-2",children:e.action}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-black",children:"Time:"}),(0,t.jsx)("p",{className:"font-medium text-black",children:e.timeToComplete})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-black",children:"Max Revenue:"}),(0,t.jsxs)("p",{className:"font-medium text-black",children:["$",e.expectedRevenue.toLocaleString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-black",children:"Conversion:"}),(0,t.jsxs)("p",{className:"font-medium text-black",children:[Math.round(100*e.conversionProbability),"%"]})]})]}),(0,t.jsx)(b.k,{value:100*e.conversionProbability,className:"mb-3"}),(0,t.jsx)(g.$,{className:"w-full",variant:"urgent"===e.priority?"default":"outline","data-testid":"button-action-".concat(s),onClick:()=>f(e,s),disabled:r.has(s)||y.isPending,children:r.has(s)?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Executing..."]}):"Start This Action"})]},s))})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Response Rate"}),(0,t.jsx)(Y.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold","data-testid":"metric-response-rate",children:u?"".concat(u.responseRate,"%"):"..."}),(0,t.jsx)("p",{className:"text-xs text-black",children:u?"".concat(u.totalResponses.toLocaleString()," responses to ").concat(u.totalLeads.toLocaleString()," leads"):"Loading..."})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Active Leads"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold","data-testid":"metric-active-leads",children:u?u.unrespondedHighPriority.toLocaleString():"..."}),(0,t.jsx)("p",{className:"text-xs text-black",children:"Unresponded high-priority leads"})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Avg Response Time"}),(0,t.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold","data-testid":"metric-response-time",children:u?u.avgResponseTime:"..."}),(0,t.jsx)("p",{className:"text-xs text-black",children:"vs industry 4+ hours"})]})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(W.A,{className:"h-5 w-5"}),"Lead Segmentation Analysis"]}),(0,t.jsx)(c.BT,{children:"Revenue potential by lead type for focused outreach"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(null==h||null==(s=h.serviceBreakdown)?void 0:s.map((e,s)=>{let a=["text-purple-600","text-orange-600","text-blue-600","text-green-600"];return(0,t.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold ".concat(a[s%a.length]),children:e.count}),(0,t.jsx)("p",{className:"text-sm font-medium text-black",children:{d2c_n400:"N-400 Citizenship",b2b_nonimmigrant_worker:"Work Visas",b2b_employment_auth:"Employment Auth",b2b_alien_relative:"Family Cases"}[e.service]||e.service}),(0,t.jsxs)("p",{className:"text-xs text-black",children:[e.avgConversionProbability,"% conversion"]})]},e.service)}))||(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"-"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Loading..."}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Getting data"})]})})})})]}),(0,t.jsxs)(c.Zp,{className:"border-blue-200 bg-blue-50",children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(es.A,{className:"h-5 w-5 text-blue-600"}),"Solo Operator Recommendations"]})}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[v.slice(0,3).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full ".concat(0===s?"bg-red-100":1===s?"bg-orange-100":"bg-blue-100"," flex items-center justify-center mt-0.5"),children:(0,t.jsx)("span",{className:"".concat(0===s?"text-red-600":1===s?"text-orange-600":"text-blue-600"," text-xs font-bold"),children:s+1})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-black",children:e.action}),(0,t.jsxs)("p",{className:"text-sm text-black",children:["Expected: $",Math.round(e.expectedRevenue).toLocaleString(),"(",Math.round(100*e.conversionProbability),"% conversion rate)"]})]})]},s)),0===v.length&&(0,t.jsx)("div",{className:"text-center text-black",children:(0,t.jsx)("p",{children:"Loading recommendations based on your pipeline data..."})})]})})]})]})}var ey=a(95740),ef=a(75426),ew=a(18085);function eC(){let{toast:e}=(0,ea.dj)(),[s,a]=(0,l.useState)("investor"),[i,r]=(0,l.useState)("investors"),[d,o]=(0,l.useState)(null),[x,m]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[p,v]=(0,l.useState)(""),[N,b]=(0,l.useState)(0),[y,f]=(0,l.useState)(0),{data:w,isLoading:A}=(0,n.I)({queryKey:["/api/campaigns/recipients",i],queryFn:async()=>{let e=await fetch("/api/campaigns/recipients/".concat(i));if(!e.ok)throw Error("Failed to fetch recipients");return e.json()},enabled:!!i}),k=(0,C.n)({mutationFn:async e=>(0,Z.AT)("/api/campaigns/personalize",{method:"POST",body:JSON.stringify(e)}),onSuccess:s=>{v(s.personalizedMessage),b(s.score),f(s.estimatedValue),e({title:"Message Personalized",description:"AI Score: ".concat(s.score,"/10 • Est. Value: $").concat(s.estimatedValue.toLocaleString())})},onError:s=>{e({title:"Personalization Failed",description:s.message||"Could not personalize message",variant:"destructive"})}}),S=(0,C.n)({mutationFn:async e=>(0,Z.AT)("/api/campaigns/send-message",{method:"POST",body:JSON.stringify(e)}),onSuccess:()=>{e({title:"Email Sent",description:"Message sent to ".concat(null==d?void 0:d.name)}),v(""),b(0),f(0)},onError:s=>{e({title:"Send Failed",description:s.message||"Could not send email",variant:"destructive"})}}),P=async()=>{d&&h&&k.mutate({template:h,recipient:d,campaignType:s})},E=async()=>{d&&p&&S.mutate({recipientId:d.id,subject:x,message:p,campaignType:s,aiScore:N,estimatedValue:y})},F=(null==w?void 0:w.recipients)||[];return F.length,(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{className:"border-blue-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ey.A,{className:"h-5 w-5 text-blue-600"}),"Campaign Workbench"]}),(0,t.jsx)(c.BT,{children:"AI-powered email personalization for all business operations"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:F.length}),(0,t.jsx)("p",{className:"text-sm text-blue-600",children:"Available Recipients"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:N>0?"".concat(N,"/10"):"-"}),(0,t.jsx)("p",{className:"text-sm text-blue-600",children:"AI Score"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-700",children:["$",y>0?y.toLocaleString():"-"]}),(0,t.jsx)("p",{className:"text-sm text-blue-600",children:"Est. Value"})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{className:"text-sm",children:"Campaign Settings"})}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Campaign Type"}),(0,t.jsxs)(U.l6,{value:s,onValueChange:a,children:[(0,t.jsx)(U.bq,{"data-testid":"select-campaign-type",children:(0,t.jsx)(U.yv,{})}),(0,t.jsx)(U.gC,{children:[{value:"investor",label:"Investor Outreach",description:"SAFE rounds, VC pitches, fundraising"},{value:"lawyer",label:"Lawyer Recruitment",description:"Partnership invites, case referrals"},{value:"client",label:"Client Engagement",description:"Follow-ups, upsells, renewals"},{value:"employee",label:"Employee Recruitment",description:"Hiring outreach, talent acquisition"}].map(e=>(0,t.jsx)(U.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Target Audience"}),(0,t.jsxs)(U.l6,{value:i,onValueChange:r,children:[(0,t.jsx)(U.bq,{"data-testid":"select-audience",children:(0,t.jsx)(U.yv,{})}),(0,t.jsx)(U.gC,{children:[{value:"investors",label:"Investors",icon:"\uD83D\uDCB0"},{value:"lawyers",label:"Lawyers",icon:"⚖️"},{value:"leads",label:"High-Value Leads",icon:"\uD83C\uDFAF"},{value:"clients",label:"Active Clients",icon:"\uD83D\uDC65"}].map(e=>(0,t.jsx)(U.eb,{value:e.value,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{children:e.label})]})},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["Recipients (",F.length,")"]}),(0,t.jsx)("div",{className:"border rounded-lg max-h-[300px] overflow-y-auto",children:A?(0,t.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Loading..."}):0===F.length?(0,t.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No recipients found"}):F.map(e=>(0,t.jsxs)("div",{className:"p-3 border-b last:border-b-0 cursor-pointer transition-colors ".concat((null==d?void 0:d.id)===e.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),onClick:()=>o(e),"data-testid":"recipient-".concat(e.id),children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.company&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.company})]},e.id))})]})]})]}),(0,t.jsxs)(c.Zp,{className:"lg:col-span-2",children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Message Builder"}),d&&(0,t.jsx)(j.E,{variant:"outline",children:d.name})]})}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Email Subject"}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"Enter email subject...",className:"w-full px-3 py-2 border rounded-lg","data-testid":"input-subject"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Email Template"}),(0,t.jsx)(H.T,{value:h,onChange:e=>u(e.target.value),placeholder:"Hi {{name}},  I wanted to reach out about {{topic}}...  Use variables: {{name}}, {{company}}, {{firstName}}",className:"min-h-[150px] font-mono text-sm","data-testid":"input-template"})]}),(0,t.jsx)(g.$,{onClick:P,disabled:!d||!h||k.isPending,className:"w-full","data-testid":"button-personalize",children:k.isPending?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Personalizing with AI..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ey.A,{className:"mr-2 h-4 w-4"}),"Personalize with AI"]})}),p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Personalized Message"}),(0,t.jsxs)(g.$,{onClick:()=>navigator.clipboard.writeText(p),size:"sm",variant:"outline","data-testid":"button-copy",children:[(0,t.jsx)(ef.A,{className:"h-4 w-4 mr-1"}),"Copy"]})]}),(0,t.jsx)(H.T,{value:p,onChange:e=>v(e.target.value),className:"min-h-[200px] font-mono text-sm","data-testid":"message-preview"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(W.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)("span",{children:["AI Score: ",(0,t.jsxs)("strong",{children:[N,"/10"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(em.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsxs)("span",{children:["Est. Value: ",(0,t.jsxs)("strong",{children:["$",y.toLocaleString()]})]})]})]}),(0,t.jsx)(g.$,{onClick:E,disabled:S.isPending,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-send",children:S.isPending?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ew.A,{className:"mr-2 h-4 w-4"}),"Send Email"]})})]})]})]})]})]})]})}function eA(){let{toast:e}=(0,ea.dj)(),[s,a]=(0,l.useState)("overview"),{data:c,isLoading:d,refetch:o}=(0,n.I)({queryKey:["/api/dashboard/stats"],queryFn:()=>i.F.getDashboardStats()}),{data:x,isLoading:m,refetch:h}=(0,n.I)({queryKey:["/api/leads"],queryFn:()=>i.F.getLeads()}),{data:j,isLoading:g}=(0,n.I)({queryKey:["/api/investor/metrics"],queryFn:async()=>{let e=await fetch("/api/investor/metrics"),s=await e.json();return s.success?s.metrics:null},refetchInterval:12e4}),{data:v}=(0,n.I)({queryKey:["/api/revenue/analytics"],queryFn:async()=>{let e=await fetch("/api/revenue/analytics"),s=await e.json();return s.success?s:null},refetchInterval:3e5});return(0,t.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,t.jsx)(r.A,{}),(0,t.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("header",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"JustiGuide GTM Engine"}),(0,t.jsx)("p",{className:"text-blue-100 mt-1",children:"Go-to-Market Operations • AI-Powered Lead Generation • Immigration Tech Platform"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,t.jsx)("span",{className:"text-sm bg-blue-500 px-2 py-1 rounded",children:"Lead Generation"}),(0,t.jsxs)("span",{className:"text-sm bg-green-500 px-2 py-1 rounded",children:[(null==c?void 0:c.totalLeads)||0," Leads"]}),(0,t.jsx)("span",{className:"text-sm bg-purple-500 px-2 py-1 rounded",children:"AI-Powered"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("button",{onClick:()=>o(),className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors text-sm font-medium",children:"Sync Data"}),(0,t.jsx)("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors text-sm font-medium",children:"Send Daily Update"})]})]})}),(0,t.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("nav",{className:"px-6",children:(0,t.jsxs)("div",{className:"flex space-x-8",children:[(0,t.jsxs)("button",{onClick:()=>a("overview"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("overview"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)("span",{children:"\uD83C\uDFAF"}),(0,t.jsx)("span",{children:"Overview"})]}),(0,t.jsxs)("button",{onClick:()=>a("leads"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("leads"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)("span",{children:"\uD83D\uDC65"}),(0,t.jsx)("span",{children:"Leads & Pipeline"})]}),(0,t.jsxs)("button",{onClick:()=>a("ai-analysis"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("ai-analysis"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)("span",{children:"\uD83E\uDD16"}),(0,t.jsx)("span",{children:"AI Analysis"})]}),(0,t.jsxs)("button",{onClick:()=>a("monitoring"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("monitoring"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)("span",{children:"\uD83D\uDCCA"}),(0,t.jsx)("span",{children:"Source Monitoring"})]})]})})}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:["overview"===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(u,{stats:c,isLoading:d}),(0,t.jsx)(eb,{}),(0,t.jsx)(eC,{}),(0,t.jsx)(el.F,{standalone:!0,variant:"compact"})]}),"leads"===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(N,{}),(0,t.jsx)(G,{}),(0,t.jsx)(O,{})]}),"ai-analysis"===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(Q,{}),(0,t.jsx)(ev,{})]}),"monitoring"===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(p.A,{stats:c}),(0,t.jsx)(ed,{}),(0,t.jsx)(J.Z,{}),(0,t.jsx)(et,{}),(0,t.jsx)(_,{}),(0,t.jsx)(X.e,{})]})]})]})]})}},68122:(e,s,a)=>{"use strict";a.d(s,{E:()=>n});var t=a(95155),l=a(25016);function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...a})}}},e=>{e.O(0,[7349,1668,4622,2619,7429,4852,5667,2494,3483,1204,3357,5842,7412,245,8437,8923,8441,1255,7358],()=>e(e.s=25408)),_N_E=e.O()}]);