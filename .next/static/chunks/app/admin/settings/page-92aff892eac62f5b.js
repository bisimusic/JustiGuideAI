(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7122],{28171:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m});var a=t(12115);let i=0,r=new Map,n=e=>{if(r.has(e))return;let s=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,s)},l=[],c={toasts:[]};function d(e){c=((e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}})(c,e),l.forEach(e=>{e(c)})}function o(e){let{...s}=e,t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(c);return a.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},33789:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(95155),i=t(12115),r=t(25016);let n=i.forwardRef((e,s)=>{let{className:t,type:i,...n}=e;return(0,a.jsx)("input",{type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},55850:(e,s,t)=>{"use strict";t.d(s,{k:()=>l});var a=t(95155),i=t(12115),r=t(77450),n=t(25016);let l=i.forwardRef((e,s)=>{let{className:t,value:i,...l}=e;return(0,a.jsx)(r.bL,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(r.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})});l.displayName=r.bL.displayName},60255:(e,s,t)=>{Promise.resolve().then(t.bind(t,75892))},67001:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var a=t(95155),i=t(12115),r=t(25016);let n=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});n.displayName="Textarea"},75892:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>B});var a=t(95155),i=t(12115),r=t(22454),n=t(37621),l=t(96029),c=t(81894),d=t(59960),o=t(57968),m=t(77959),x=t(70561),h=t(83209),u=t(97003),p=t(33789),j=t(90235),f=t(67812),g=t(54664),y=t(28171),v=t(23664),N=t(15870),b=t(42529),w=t(78874),S=t(6132),A=t(18085),T=t(85998),C=t(16485),k=t(89715),E=t(81630);function R(){var e,s,t,r;let[n,l]=(0,i.useState)({configured:!1,connected:!1,service:"Not configured",user:null}),[c,d]=(0,i.useState)(!1),[o,m]=(0,i.useState)(""),[x,R]=(0,i.useState)(!1),[P,O]=(0,i.useState)(!1),[I,G]=(0,i.useState)(!1),[D,_]=(0,i.useState)(!1),[F,M]=(0,i.useState)(!1),[B,U]=(0,i.useState)([]),{toast:L}=(0,y.dj)(),W=async()=>{try{let e=await fetch("/api/email/status"),s=await e.json();l({configured:s.configured||!1,connected:"connected"===s.status,service:s.service||"Not configured",user:s.user||null})}catch(e){console.error("Failed to fetch email status:",e)}},Z=async()=>{if(!o.trim())return void L({title:"Email Required",description:"Please enter an email address to send the test email",variant:"destructive"});R(!0);try{await (0,E.AT)("/api/email/test",{method:"POST",body:JSON.stringify({to:o}),headers:{"Content-Type":"application/json"}}),L({title:"Test Email Sent",description:"Test email sent successfully to ".concat(o)})}catch(e){L({title:"Test Email Failed",description:"Failed to send test email. Please check your email configuration.",variant:"destructive"})}finally{R(!1)}},z=async()=>{O(!0);try{await (0,E.AT)("/api/email/weekly-report",{method:"POST"}),L({title:"Weekly Report Sent",description:"Weekly performance report sent successfully"})}catch(e){L({title:"Report Failed",description:"Failed to send weekly report. Please check your email configuration.",variant:"destructive"})}finally{O(!1)}},$=async()=>{G(!0);try{let e=await fetch("/api/google/auth-url"),s=await e.json();if(s.authUrl){let e=window.open(s.authUrl,"google-auth","width=500,height=600"),t=setInterval(()=>{(null==e?void 0:e.closed)&&(clearInterval(t),W(),L({title:"Authentication Complete",description:"Google authentication completed. Please check the status."}))},1e3)}}catch(e){L({title:"Authentication Failed",description:"Failed to start Google authentication process.",variant:"destructive"})}finally{G(!1)}},H=async()=>{_(!0);try{let e=await (0,E.AT)("/api/google/test-scopes",{method:"POST"});L({title:"Scopes Test Successful",description:"All Gmail API permissions verified: ".concat(Object.keys(e.scopeTests).length," scopes tested")}),console.log("Gmail API Scope Test Results:",e.scopeTests)}catch(e){L({title:"Scopes Test Failed",description:(null==e?void 0:e.authenticated)===!1?"Please authenticate with Google first":"Some Gmail API permissions may be missing or restricted",variant:"destructive"})}finally{_(!1)}};return(0,i.useEffect)(()=>{W()},[]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Email Integration"}),(0,a.jsx)("p",{className:"text-blue-100 text-lg",children:"Configure automated notifications and reports for your lead generation system"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(v.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{className:"text-xl font-semibold",children:"JustiGuide Mail"})]}),(0,a.jsx)(f.E,{variant:n.connected?"default":"destructive",className:"text-sm",children:n.connected?"Connected":"Disconnected"})]})]})}),(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsxs)(h.ZB,{className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 mr-2"}),"Email Service Status"]}),(0,a.jsx)(h.BT,{children:"Current email configuration and connection status"})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[n.configured?(0,a.jsx)(b.A,{className:"w-6 h-6 text-green-500"}):(0,a.jsx)(w.A,{className:"w-6 h-6 text-red-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Configuration"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.configured?"Configured":"Not configured"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[n.connected?(0,a.jsx)(b.A,{className:"w-6 h-6 text-green-500"}):(0,a.jsx)(w.A,{className:"w-6 h-6 text-red-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Connection"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.connected?"Connected":"Disconnected"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(v.A,{className:"w-6 h-6 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Service"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.service}),n.user&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:n.user}),(null==(e=n.methods)?void 0:e.gmailApi.authenticated)&&(0,a.jsx)(f.E,{variant:"default",className:"text-xs mt-1",children:"Gmail API"})]})]})]})})]}),!n.configured&&(0,a.jsxs)(h.Zp,{className:"border-orange-200 bg-orange-50",children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsxs)(h.ZB,{className:"flex items-center text-orange-800",children:[(0,a.jsx)(S.A,{className:"w-5 h-5 mr-2"}),"Email Setup Required"]}),(0,a.jsx)(h.BT,{className:"text-orange-700",children:"Configure your email service to enable automated notifications"})]}),(0,a.jsx)(h.Wu,{className:"text-orange-800",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Gmail API Setup (Recommended)"}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg space-y-3",children:[(0,a.jsx)("p",{className:"text-sm",children:"✅ Google OAuth credentials detected"}),(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded text-xs",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"Required Permissions:"}),(0,a.jsxs)("ul",{className:"space-y-1 text-blue-700",children:[(0,a.jsx)("li",{children:"• Send emails on your behalf"}),(0,a.jsx)("li",{children:"• Read, compose, and modify emails"}),(0,a.jsx)("li",{children:"• Access email metadata and labels"}),(0,a.jsx)("li",{children:"• Create automated responses"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.$,{onClick:$,disabled:I,className:"w-full bg-blue-600 hover:bg-blue-700",children:I?"Authenticating...":"Authenticate with Google"}),(null==(s=n.methods)?void 0:s.gmailApi.authenticated)&&(0,a.jsx)(u.$,{onClick:H,disabled:D,variant:"outline",className:"w-full",children:D?"Testing Scopes...":"Test All Permissions"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:(null==(t=n.methods)?void 0:t.gmailApi.authenticated)?"Authentication complete. Test all permissions to verify scope access.":"This will open Google OAuth to grant comprehensive email permissions"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Gmail App Password Setup (SMTP Backup)"}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Step-by-Step App Password Creation:"}),(0,a.jsxs)("ol",{className:"text-xs space-y-1 list-decimal list-inside text-gray-700",children:[(0,a.jsxs)("li",{children:["Go to ",(0,a.jsx)("span",{className:"font-mono bg-gray-100 px-1 rounded",children:"myaccount.google.com"})]}),(0,a.jsx)("li",{children:'Navigate to "Security" → "2-Step Verification"'}),(0,a.jsx)("li",{children:"Enable 2-Step Verification if not already enabled"}),(0,a.jsx)("li",{children:'Scroll down and click "App passwords"'}),(0,a.jsx)("li",{children:'Select "Mail" as the app type'}),(0,a.jsx)("li",{children:'Click "Generate" to create a 16-character password'}),(0,a.jsx)("li",{children:"Copy the generated password (format: xxxx xxxx xxxx xxxx)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-1",children:"Environment Variables to Set:"}),(0,a.jsxs)("div",{className:"bg-gray-100 p-3 rounded text-xs font-mono space-y-1",children:[(0,a.jsx)("div",{className:"text-green-700",children:"# Your Gmail address"}),(0,a.jsx)("div",{children:"GMAIL_USER=your-email@gmail.com"}),(0,a.jsx)("div",{className:"text-green-700",children:"# The 16-character app password (no spaces)"}),(0,a.jsx)("div",{children:"GMAIL_APP_PASSWORD=xxxxxxxxxxxxxxxx"}),(0,a.jsx)("div",{className:"text-green-700",children:"# Where to send notifications"}),(0,a.jsx)("div",{children:"NOTIFICATION_EMAIL=your-notification-email@gmail.com"})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 p-2 rounded",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"})," App passwords provide SMTP backup when Gmail API is unavailable. The system automatically uses Gmail API when authenticated, with SMTP as fallback."]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Custom SMTP Setup"}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg space-y-2",children:[(0,a.jsx)("p",{className:"text-sm",children:"Set these environment variables:"}),(0,a.jsxs)("div",{className:"bg-gray-100 p-3 rounded text-xs font-mono space-y-1",children:[(0,a.jsx)("div",{children:"SMTP_HOST=your-smtp-server.com"}),(0,a.jsx)("div",{children:"SMTP_PORT=587"}),(0,a.jsx)("div",{children:"SMTP_USER=your-email@domain.com"}),(0,a.jsx)("div",{children:"SMTP_PASSWORD=your-password"}),(0,a.jsx)("div",{children:"SMTP_SECURE=false"})]})]})]})]})})]}),n.configured&&(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsxs)(h.ZB,{className:"flex items-center",children:[(0,a.jsx)(A.A,{className:"w-5 h-5 mr-2"}),"Test Email Integration"]}),(0,a.jsx)(h.BT,{children:"Send a test email to verify your configuration"})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{htmlFor:"testEmail",children:"Test Email Address"}),(0,a.jsx)(p.p,{id:"testEmail",type:"email",placeholder:"Enter email address to send test email",value:o,onChange:e=>m(e.target.value)})]}),(0,a.jsxs)(u.$,{onClick:Z,disabled:x||!n.connected,className:"w-full md:w-auto",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 mr-2"}),x?"Sending...":"Send Test Email"]})]})})]}),n.configured&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsxs)(h.ZB,{className:"flex items-center",children:[(0,a.jsx)(T.A,{className:"w-5 h-5 mr-2"}),"Lead Notifications"]}),(0,a.jsx)(h.BT,{children:"Automatic email alerts when high-priority leads are discovered"})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-800",children:"Real-time Alerts"}),(0,a.jsx)("p",{className:"text-sm text-green-600",children:"Get notified instantly for high-scoring leads"})]}),(0,a.jsx)(b.A,{className:"w-5 h-5 text-green-500"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-800",children:"AI Response Tracking"}),(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"Email notifications when AI responds to leads"})]}),(0,a.jsx)(b.A,{className:"w-5 h-5 text-blue-500"})]})]})})]}),(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsxs)(h.ZB,{className:"flex items-center",children:[(0,a.jsx)(C.A,{className:"w-5 h-5 mr-2"}),"Weekly Reports"]}),(0,a.jsx)(h.BT,{children:"Automated performance summaries and analytics"})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"font-medium text-purple-800 mb-1",children:"Performance Analytics"}),(0,a.jsx)("p",{className:"text-sm text-purple-600",children:"Lead conversion rates, response times, and platform performance"})]}),(0,a.jsxs)(u.$,{onClick:z,disabled:P||!n.connected,variant:"outline",className:"w-full",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 mr-2"}),P?"Sending...":"Send Weekly Report Now"]})]})})]})]}),n.configured&&(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsx)(h.ZB,{children:"Current Configuration"}),(0,a.jsx)(h.BT,{children:"Active email integration settings"})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Email Service:"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(f.E,{variant:"outline",children:n.service}),(null==(r=n.methods)?void 0:r.gmailApi.authenticated)&&(0,a.jsx)(f.E,{variant:"default",children:"API Authenticated"})]})]}),n.user&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Email Account:"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:n.user})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Connection Status:"}),(0,a.jsx)(f.E,{variant:n.connected?"default":"destructive",children:n.connected?"Connected":"Disconnected"})]}),(0,a.jsx)(g.w,{}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Email notifications are automatically sent for high-priority leads (AI score ≥ 8) and conversion activities."})})]})})]})]})}var P=t(32559),O=t(93499),I=t(5370),G=t(67001);function D(){let[e,s]=(0,i.useState)(""),[t,r]=(0,i.useState)(""),[n,l]=(0,i.useState)(""),[c,d]=(0,i.useState)(!1),[o,m]=(0,i.useState)(1),[x,j]=(0,i.useState)(""),[f,g]=(0,i.useState)(""),y=async()=>{try{d(!0),j("");let e=await fetch("/api/gmail/auth/url"),t=await e.json();t.success?(s(t.authUrl),m(2),g("Authorization URL generated successfully")):j(t.error||"Failed to generate auth URL")}catch(e){j("Failed to generate authorization URL")}finally{d(!1)}},N=async()=>{if(!t.trim())return void j("Please enter the authorization code");try{d(!0),j("");let s=await fetch("/api/gmail/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t.trim()})}),a=await s.json();if(a.success){var e;l(a.refreshToken),m(3),g("Gmail authenticated successfully! Email: ".concat(null==(e=a.profile)?void 0:e.email))}else j(a.error||"Failed to exchange authorization code")}catch(e){j("Failed to exchange authorization code")}finally{d(!1)}},w=e=>{navigator.clipboard.writeText(e).then(()=>{g("Copied to clipboard!")})};return(0,a.jsxs)(h.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"w-5 h-5"}),"Gmail Authentication Setup"]}),(0,a.jsx)(h.BT,{children:"Enable authentic data access from your Gmail account for contact extraction and persona analysis"})]}),(0,a.jsxs)(h.Wu,{className:"space-y-6",children:[x&&(0,a.jsxs)(P.Fc,{variant:"destructive",children:[(0,a.jsx)(S.A,{className:"h-4 w-4"}),(0,a.jsx)(P.TN,{children:x})]}),f&&(0,a.jsxs)(P.Fc,{children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)(P.TN,{children:f})]}),1===o&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"1"}),"Generate Authorization URL"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground ml-8",children:"Start the OAuth flow to connect your Gmail account for authentic data access."}),(0,a.jsx)(u.$,{onClick:y,disabled:c,className:"ml-8",children:c?"Generating...":"Generate Auth URL"})]}),2===o&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"2"}),"Complete OAuth Authorization"]}),(0,a.jsxs)("div",{className:"ml-8 space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(u.$,{onClick:()=>{e&&window.open(e,"_blank")},variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"w-4 h-4"}),"Open Gmail Authorization"]}),(0,a.jsx)(u.$,{variant:"ghost",size:"sm",onClick:()=>w(e),children:"Copy URL"})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,a.jsx)("p",{children:'1. Click "Open Gmail Authorization" above'}),(0,a.jsx)("p",{children:"2. Sign in with your Gmail account (bisi@justiguide.com)"}),(0,a.jsx)("p",{children:"3. Grant permissions to access Gmail"}),(0,a.jsx)("p",{children:"4. Copy the authorization code and paste it below"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Authorization Code:"}),(0,a.jsx)(p.p,{value:t,onChange:e=>r(e.target.value),placeholder:"Paste the authorization code here...",className:"font-mono text-sm"})]}),(0,a.jsx)(u.$,{onClick:N,disabled:c||!t.trim(),children:c?"Exchanging...":"Exchange Code for Token"})]})]}),3===o&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs",children:"3"}),"Update Refresh Token Secret"]}),(0,a.jsxs)("div",{className:"ml-8 space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Copy this refresh token and update your GOOGLE_REFRESH_TOKEN secret in Replit:"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Refresh Token:"}),(0,a.jsx)(G.T,{value:n,readOnly:!0,className:"font-mono text-xs bg-muted",rows:4}),(0,a.jsxs)(u.$,{variant:"outline",size:"sm",onClick:()=>w(n),className:"flex items-center gap-2",children:[(0,a.jsx)(I.A,{className:"w-4 h-4"}),"Copy Refresh Token"]})]}),(0,a.jsxs)(P.Fc,{children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsxs)(P.TN,{children:[(0,a.jsx)("strong",{children:"Next Steps:"}),(0,a.jsx)("br",{}),"1. Copy the refresh token above",(0,a.jsx)("br",{}),"2. Update GOOGLE_REFRESH_TOKEN in Replit Secrets",(0,a.jsx)("br",{}),"3. Restart the server",(0,a.jsx)("br",{}),"4. Gmail API will access your authentic email data"]})]})]})]}),o>1&&(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsx)(u.$,{variant:"ghost",onClick:()=>{m(1),s(""),r(""),l(""),j(""),g("")},children:"Start Over"})})]})]})}var _=t(50906),F=(t(3166),t(33738));function M(){let e=new Date().toISOString();return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(_.A,{className:"w-5 h-5"}),"WebSocket Connection Status"]}),(0,a.jsx)(h.BT,{children:"Real-time connection monitoring"})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(F.A,{className:"w-6 h-6 text-red-500"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium",children:["Status: ","Disconnected"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Last message: ",e]})]})]}),(0,a.jsx)(f.E,{variant:"destructive",children:"Inactive"})]})})]})})}function B(){let[e,s]=(0,i.useState)("system"),{data:t,isLoading:h}=(0,r.I)({queryKey:["/api/dashboard/stats"],queryFn:()=>n.F.getDashboardStats()});return(0,a.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,a.jsx)(l.A,{}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)("header",{className:"bg-gradient-to-r from-gray-600 to-gray-800 text-white px-6 py-6",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"System Settings"}),(0,a.jsx)("p",{className:"text-gray-100 mt-1",children:"System Health • Integrations • Automation Controls"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsx)("span",{className:"text-sm bg-green-500 px-2 py-1 rounded",children:"System Health"}),(0,a.jsx)("span",{className:"text-sm bg-blue-500 px-2 py-1 rounded",children:"API Management"}),(0,a.jsx)("span",{className:"text-sm bg-purple-500 px-2 py-1 rounded",children:"Database Tools"})]})]})})}),(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("nav",{className:"px-6",children:(0,a.jsxs)("div",{className:"flex space-x-8",children:[(0,a.jsxs)("button",{onClick:()=>s("system"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("system"===e?"border-gray-500 text-gray-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:"⚙️"}),(0,a.jsx)("span",{children:"System Health"})]}),(0,a.jsxs)("button",{onClick:()=>s("integrations"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("integrations"===e?"border-gray-500 text-gray-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:"\uD83D\uDD17"}),(0,a.jsx)("span",{children:"Integrations"})]}),(0,a.jsxs)("button",{onClick:()=>s("automation"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("automation"===e?"border-gray-500 text-gray-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:"\uD83E\uDD16"}),(0,a.jsx)("span",{children:"Automation"})]}),(0,a.jsxs)("button",{onClick:()=>s("performance"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("performance"===e?"border-gray-500 text-gray-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:"\uD83D\uDCCA"}),(0,a.jsx)("span",{children:"Performance"})]}),(0,a.jsxs)("button",{onClick:()=>s("websocket"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("websocket"===e?"border-gray-500 text-gray-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:"\uD83D\uDD0C"}),(0,a.jsx)("span",{children:"WebSocket"})]})]})})}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:["system"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(c.A,{stats:t}),(0,a.jsx)(o.e,{})]}),"integrations"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(R,{}),(0,a.jsx)(D,{})]}),"automation"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(m.A,{}),(0,a.jsx)(x.s,{})]}),"performance"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(d.Z,{}),(0,a.jsx)(o.e,{})]}),"websocket"===e&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(M,{})})]})]})]})}},90235:(e,s,t)=>{"use strict";t.d(s,{J:()=>d});var a=t(95155),i=t(12115),r=t(32894),n=t(83101),l=t(25016);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.b,{ref:s,className:(0,l.cn)(c(),t),...i})});d.displayName=r.b.displayName},90923:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>l});var a=t(95155),i=t(12115),r=t(25667),n=t(25016);let l=r.bL,c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...i})});c.displayName=r.B8.displayName;let d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...i})});d.displayName=r.l9.displayName;let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...i})});o.displayName=r.UC.displayName}},e=>{e.O(0,[7349,1668,4622,2619,7429,4852,5667,2494,8325,245,8923,8441,1255,7358],()=>e(e.s=60255)),_N_E=e.O()}]);