(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1574],{28171:(e,s,a)=>{"use strict";a.d(s,{dj:()=>x});var t=a(12115);let l=0,r=new Map,i=e=>{if(r.has(e))return;let s=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,s)},n=[],d={toasts:[]};function c(e){d=((e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}})(d,e),n.forEach(e=>{e(d)})}function o(e){let{...s}=e,a=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function x(){let[e,s]=t.useState(d);return t.useEffect(()=>(n.push(s),()=>{let e=n.indexOf(s);e>-1&&n.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},32559:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>d,TN:()=>c});var t=a(95155),l=a(12115),r=a(83101),i=a(25016);let n=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=l.forwardRef((e,s)=>{let{className:a,variant:l,...r}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(n({variant:l}),a),...r})});d.displayName="Alert",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...l})}).displayName="AlertTitle";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...l})});c.displayName="AlertDescription"},33789:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(95155),l=a(12115),r=a(25016);let i=l.forwardRef((e,s)=>{let{className:a,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"},41411:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>_});var t=a(95155),l=a(12115),r=a(22454),i=a(37621),n=a(96029),d=a(83209),c=a(97003),o=a(67812),x=a(47507),m=a(33789),u=a(68122),h=a(42529),f=a(26983),j=a(86651),p=a(39347),g=a(37586),v=a(93499),N=a(90368),b=a(27937),y=a(67001);function w(e){let{lead:s}=e;return(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"p-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Response generator for lead: ",s.id]}),(0,t.jsx)(y.T,{placeholder:"Generate response...",className:"mt-2"}),(0,t.jsx)(c.$,{className:"mt-2",children:"Generate Response"})]})})}function k(e){let{leads:s,isLoading:a}=e,[n,y]=(0,l.useState)("all"),[k,A]=(0,l.useState)("all"),[S,C]=(0,l.useState)(""),[L,D]=(0,l.useState)(1),[R,E]=(0,l.useState)(25),{data:T}=(0,r.I)({queryKey:["/api/leads/with-responses"],queryFn:()=>i.F.getLeadsWithResponses()}),{data:F}=(0,r.I)({queryKey:["/api/leads/with-response-details"],queryFn:()=>fetch("/api/leads/with-response-details").then(e=>e.json())}),I=new Set(Array.isArray(T)?T.map(e=>e.id):[]),q=(null==s?void 0:s.filter(e=>{var s,a;let t="all"===n||e.sourcePlatform===n,l="all"===k||"responded"===k&&I.has(e.id)||"not-responded"===k&&!I.has(e.id),r=""===S||e.title.toLowerCase().includes(S.toLowerCase())||(null==(s=e.content)?void 0:s.toLowerCase().includes(S.toLowerCase()))||(null==(a=e.authorUsername)?void 0:a.toLowerCase().includes(S.toLowerCase()));return t&&l&&r}))||[],P=q.length,V=Math.ceil(P/R),M=(L-1)*R,_=M+R,z=q.slice(M,_);return a?(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(u.E,{className:"h-6 w-48"})}),(0,t.jsx)(d.Wu,{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(u.E,{className:"h-24 w-full"},s))})]}):(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{className:"border-b border-gray-200",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(d.ZB,{className:"text-lg font-semibold text-gray-900",children:"Recent Leads"}),(0,t.jsxs)(o.E,{variant:"outline",className:"text-sm font-medium",children:[z.length," of ",q.length," ","all"!==n||"all"!==k||S?"filtered":"total"," leads"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Show:"}),(0,t.jsxs)(x.l6,{value:R.toString(),onValueChange:e=>{E(Number(e)),D(1)},children:[(0,t.jsx)(x.bq,{className:"w-20",children:(0,t.jsx)(x.yv,{})}),(0,t.jsxs)(x.gC,{children:[(0,t.jsx)(x.eb,{value:"10",children:"10"}),(0,t.jsx)(x.eb,{value:"25",children:"25"}),(0,t.jsx)(x.eb,{value:"50",children:"50"}),(0,t.jsx)(x.eb,{value:"100",children:"100"})]})]}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"per page"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(c.$,{variant:"reddit"===n&&"not-responded"===k?"default":"outline",size:"sm",onClick:()=>{y("reddit"),A("not-responded"),C(""),E(25),D(1)},className:"text-xs","data-testid":"filter-pending-reddit",children:[(0,t.jsx)("i",{className:"fab fa-reddit mr-1 text-orange-500"}),"Pending Reddit"]}),(0,t.jsxs)(c.$,{variant:"all"===n&&"not-responded"===k&&""===S?"default":"outline",size:"sm",onClick:()=>{y("all"),A("not-responded"),C("")},className:"text-xs","data-testid":"filter-all-pending",children:[(0,t.jsx)(f.A,{className:"w-3 h-3 mr-1"}),"All Pending"]}),(0,t.jsx)(c.$,{variant:"all"===n&&"all"===k&&""===S?"default":"outline",size:"sm",onClick:()=>{y("all"),A("all"),C("")},className:"text-xs","data-testid":"filter-clear-all",children:"Clear Filters"})]}),(0,t.jsxs)("div",{className:"relative w-64",children:[(0,t.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(m.p,{type:"text",placeholder:"Search leads...",value:S,onChange:e=>C(e.target.value),className:"pl-10 w-full"})]}),(0,t.jsxs)(x.l6,{value:n,onValueChange:y,children:[(0,t.jsx)(x.bq,{className:"w-40",children:(0,t.jsx)(x.yv,{})}),(0,t.jsxs)(x.gC,{children:[(0,t.jsx)(x.eb,{value:"all",children:"All Sources"}),(0,t.jsx)(x.eb,{value:"reddit",children:"\uD83D\uDFE0 Reddit"}),(0,t.jsx)(x.eb,{value:"linkedin",children:"LinkedIn"}),(0,t.jsx)(x.eb,{value:"facebook",children:"Facebook"}),(0,t.jsx)(x.eb,{value:"instagram",children:"Instagram"}),(0,t.jsx)(x.eb,{value:"tiktok",children:"TikTok"}),(0,t.jsx)(x.eb,{value:"twitter",children:"Twitter"}),(0,t.jsx)(x.eb,{value:"directories",children:"Directories"}),(0,t.jsx)(x.eb,{value:"discord",children:"Discord"}),(0,t.jsx)(x.eb,{value:"whatsapp",children:"WhatsApp"}),(0,t.jsx)(x.eb,{value:"quora",children:"\uD83D\uDD34 Quora"})]})]}),(0,t.jsxs)(x.l6,{value:k,onValueChange:A,children:[(0,t.jsx)(x.bq,{className:"w-40",children:(0,t.jsx)(x.yv,{})}),(0,t.jsxs)(x.gC,{children:[(0,t.jsx)(x.eb,{value:"all",children:"All Leads"}),(0,t.jsx)(x.eb,{value:"responded",children:"Responded"}),(0,t.jsx)(x.eb,{value:"not-responded",children:"No Response"})]})]})]})]})}),(0,t.jsx)(d.Wu,{className:"p-0",children:(0,t.jsx)("div",{className:"max-h-[600px] overflow-y-auto scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-gray-300 hover:scrollbar-thumb-gray-400",children:(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:0===q.length?(0,t.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No leads found. Try scanning for new leads or adjust your filters."}):(0,t.jsxs)(t.Fragment,{children:[z.map(e=>{var s,a,l,r;return(0,t.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 w-full",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0 overflow-hidden pr-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(e=>{switch(e){case"reddit":return(0,t.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-reddit text-orange-600"})});case"linkedin":return(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-linkedin text-blue-600"})});case"twitter":return(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-twitter text-gray-600"})});case"facebook":return(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-facebook text-blue-600"})});case"instagram":return(0,t.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-instagram text-purple-600"})});case"tiktok":return(0,t.jsx)("div",{className:"w-8 h-8 bg-black rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-tiktok text-white"})});case"directory":case"directories":return(0,t.jsx)("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-book text-amber-600"})});case"discord":return(0,t.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-discord text-indigo-600"})});case"whatsapp":return(0,t.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-whatsapp text-green-600"})});case"quora":return(0,t.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fab fa-quora text-red-600"})});default:return(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-lg"})}})(e.sourcePlatform),(0,t.jsxs)("div",{className:"flex-1 min-w-0 overflow-hidden",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900 break-words leading-5 mb-1 overflow-wrap-anywhere word-break-all w-full",children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:[e.subreddit?"r/".concat(e.subreddit):e.sourcePlatform," • ",new Date(e.discoveredAt).toLocaleDateString()," • u/",e.authorUsername]})]}),e.isValidated?(0,t.jsxs)(o.E,{className:"bg-green-500 text-white",children:[(0,t.jsx)("i",{className:"fas fa-check mr-1"}),"Validated"]}):(0,t.jsxs)(o.E,{className:"bg-yellow-500 text-white",children:[(0,t.jsx)("i",{className:"fas fa-clock mr-1"}),"Pending"]}),(a=e.id,I.has(a)?(0,t.jsxs)(o.E,{className:"bg-blue-500 text-white",children:[(0,t.jsx)(h.A,{className:"w-3 h-3 mr-1"}),"Responded"]}):(0,t.jsxs)(o.E,{variant:"outline",className:"text-orange-600 border-orange-300 bg-orange-50",children:[(0,t.jsx)(f.A,{className:"w-3 h-3 mr-1"}),"No Response"]}))]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3 leading-relaxed break-words overflow-hidden overflow-wrap-anywhere word-break-all w-full",children:e.content.length>300?"".concat(e.content.slice(0,300),"..."):e.content}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.aiScore&&(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(p.A,{className:"w-3 h-3 text-yellow-500 mr-1"}),"AI Score: ",(0,t.jsx)("strong",{className:"text-gray-900 ml-1",children:Number(e.aiScore).toFixed(1)})]}),(null==(s=e.engagement)?void 0:s.comments)&&(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(g.A,{className:"w-3 h-3 mr-1"}),e.engagement.comments," comments"]}),(0,t.jsxs)(c.$,{variant:"link",size:"sm",className:"p-0 h-auto text-primary hover:underline",onClick:()=>window.open(e.sourceUrl,"_blank"),children:[(0,t.jsx)(v.A,{className:"w-3 h-3 mr-1"}),"View Source →"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end space-y-2 flex-shrink-0 min-w-[120px]",children:[(l=e.priority,(0,t.jsx)(o.E,{className:(null==(r=({high:{variant:"default",className:"bg-green-500 text-white"},medium:{variant:"secondary",className:"bg-yellow-500 text-white"},low:{variant:"outline",className:"bg-gray-400 text-white"}})[l])?void 0:r.className)||"bg-gray-400 text-white",children:"high"===l?"High Priority":"medium"===l?"Medium":"Low"})),(0,t.jsxs)("div",{className:"flex flex-col space-y-2 items-end",children:[!I.has(e.id)&&(0,t.jsx)(w,{lead:e}),(()=>{let s=Array.isArray(F)?F.find(s=>s.id===e.id):null,a=null==s?void 0:s.responseUrl;return a?(0,t.jsxs)(c.$,{variant:"outline",size:"sm",className:"border-blue-200 text-blue-700 hover:bg-blue-50",onClick:()=>window.open(a,"_blank"),children:[(0,t.jsx)(v.A,{className:"w-3 h-3 mr-1"}),"View Response"]}):null})(),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",className:"border-gray-200 text-gray-700 hover:bg-gray-50",onClick:()=>window.open(e.sourceUrl,"_blank"),children:[(0,t.jsx)(v.A,{className:"w-3 h-3 mr-1"}),"View Source"]})]})]})]})},e.id)}),!1]})})})}),V>1&&(0,t.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",M+1,"-",Math.min(_,P)," of ",P," leads"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>D(Math.max(1,L-1)),disabled:1===L,children:[(0,t.jsx)(N.A,{className:"w-4 h-4 mr-1"}),"Previous"]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,V)},(e,s)=>{let a=Math.max(1,Math.min(V-4,L-2))+s;return(0,t.jsx)(c.$,{variant:L===a?"default":"ghost",size:"sm",onClick:()=>D(a),className:"w-10 h-8",children:a},a)})}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>D(Math.min(V,L+1)),disabled:L===V,children:["Next",(0,t.jsx)(b.A,{className:"w-4 h-4 ml-1"})]})]})]})]})}var A=a(99776),S=a(80549),C=a(55850),L=a(32559),D=a(54664),R=a(28171),E=a(17910),T=a(89559),F=a(52056),I=a(61362),q=a(78874),P=a(56154);function V(){let{toast:e}=(0,R.dj)(),s=(0,A.jE)(),[a,n]=(0,l.useState)(!1),{data:x,isLoading:m,error:u}=(0,r.I)({queryKey:["audit","integrity"],queryFn:i.F.getIntegrityAudit,refetchInterval:3e4}),h=(0,S.n)({mutationFn:i.F.validateAllSources,onSuccess:a=>{e({title:"Source Validation Complete",description:"".concat(a.validated," leads validated, ").concat(a.failed," failed"),variant:a.failed>0?"destructive":"default"}),s.invalidateQueries({queryKey:["audit"]}),s.invalidateQueries({queryKey:["leads"]}),s.invalidateQueries({queryKey:["dashboard"]})},onError:s=>{e({title:"Validation Failed",description:"Unable to validate sources. Please try again.",variant:"destructive"})}});if(m)return(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(E.A,{className:"h-5 w-5"}),"Source Validation"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 animate-spin"}),"Loading validation data..."]})})]});if(u)return(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(E.A,{className:"h-5 w-5"}),"Source Validation"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)(L.Fc,{variant:"destructive",children:[(0,t.jsx)(F.A,{className:"h-4 w-4"}),(0,t.jsx)(L.TN,{children:"Unable to load validation data. Please refresh the page."})]})})]});if(!x)return null;let f=x.totalLeads||0,j=x.validSources||0,p=x.invalidSources||0,g=x.validationRate||(f>0?j/f*100:0),v=g>=95?"Good":g>=90?"Fair":"Poor",N=x.lastAuditTime,b=p>0?[{severity:"medium",leadId:"sample-lead-id",issue:"".concat(p," leads require source validation")}]:[],y=g<100?["Run source validation on unvalidated leads","Set up automated validation for new leads"]:[],w=b.filter(e=>"high"===e.severity).length;return(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(E.A,{className:"h-5 w-5"}),"Source Validation System"]})}),(0,t.jsxs)(d.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Data Integrity"}),(0,t.jsxs)(o.E,{variant:g>=95?"default":g>=90?"secondary":"destructive",className:"flex items-center gap-1",children:[g>=95?(0,t.jsx)(I.A,{className:"h-3 w-3"}):g>=90?(0,t.jsx)(F.A,{className:"h-3 w-3"}):(0,t.jsx)(q.A,{className:"h-3 w-3"}),g.toFixed(1),"% Validated"]})]}),(0,t.jsx)(C.k,{value:g,className:"h-2"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400",children:j}),(0,t.jsx)("div",{className:"text-muted-foreground",children:"Valid Sources"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium text-red-600 dark:text-red-400",children:p}),(0,t.jsx)("div",{className:"text-muted-foreground",children:"Invalid Sources"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium text-orange-600 dark:text-orange-400",children:b.length}),(0,t.jsx)("div",{className:"text-muted-foreground",children:"Issues Found"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(D.w,{}),(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Data Quality Status"}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Overall Data Integrity"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"System assessment of data quality"})]}),(0,t.jsx)(o.E,{variant:"Good"===v?"default":"Fair"===v?"secondary":"destructive",className:"capitalize",children:v})]})]}),(w>0||y.length>0)&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(D.w,{}),w>0&&(0,t.jsxs)(L.Fc,{variant:"destructive",children:[(0,t.jsx)(F.A,{className:"h-4 w-4"}),(0,t.jsxs)(L.TN,{children:[w," high-priority data integrity issue",w>1?"s":""," detected"]})]}),y.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Recommendations"}),(0,t.jsx)("ul",{className:"text-xs text-muted-foreground space-y-1",children:y.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-orange-500 mt-1",children:"•"}),(0,t.jsx)("span",{children:e})]},s))})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(D.w,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Validation Actions"}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Last audit: ",N?new Date(N).toLocaleString():"Never"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>n(!a),children:[a?"Hide":"Show"," Details"]}),(0,t.jsxs)(c.$,{size:"sm",onClick:()=>h.mutate(),disabled:h.isPending,className:"flex items-center gap-2",children:[h.isPending?(0,t.jsx)(T.A,{className:"h-3 w-3 animate-spin"}):(0,t.jsx)(P.A,{className:"h-3 w-3"}),"Validate All"]})]})]})]}),a&&b.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(D.w,{}),(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Detailed Issues"}),(0,t.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:b.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-2 p-2 bg-muted/50 rounded-md",children:[(0,t.jsx)(o.E,{variant:"high"===e.severity?"destructive":"medium"===e.severity?"secondary":"outline",className:"text-xs mt-0.5",children:e.severity}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"text-xs font-mono text-muted-foreground",children:[e.leadId.substring(0,8),"..."]}),(0,t.jsx)("div",{className:"text-sm",children:e.issue})]})]},s))})]})]})]})}var M=a(91169);function _(){let[e,s]=(0,l.useState)("list"),[a,u]=(0,l.useState)(""),[h,f]=(0,l.useState)("all"),[p,v]=(0,l.useState)("all"),{data:N,isLoading:b}=(0,r.I)({queryKey:["/api/leads"],queryFn:()=>i.F.getLeads()}),y=null==N?void 0:N.map(e=>({...e,urgencyLevel:e.urgencyLevel||(e.aiScore>=8?"high":e.aiScore>=6?"medium":"low")})),{data:w}=(0,r.I)({queryKey:["/api/dashboard/stats"],queryFn:()=>i.F.getDashboardStats()}),A=(null==y?void 0:y.filter(e=>{let s=""===a||e.title.toLowerCase().includes(a.toLowerCase())||e.content.toLowerCase().includes(a.toLowerCase())||e.authorUsername.toLowerCase().includes(a.toLowerCase()),t="all"===h||e.sourcePlatform===h,l="all"===p||e.urgencyLevel===p;return s&&t&&l}))||[],S=["reddit","linkedin","facebook","instagram","twitter","discord","whatsapp","directories","quora","tiktok","uploaded"],C=Array.from(new Set([...S,...Array.from(new Set((null==y?void 0:y.map(e=>e.sourcePlatform))||[]))])),L=C.reduce((e,s)=>(e[s]=(null==y?void 0:y.filter(e=>e.sourcePlatform===s).length)||0,e),{}),D=C.filter(e=>L[e]>0),R=S.filter(e=>0===L[e]),E=e=>{switch(e.toLowerCase()){case"reddit":return"\uD83D\uDFE0";case"linkedin":return"\uD83D\uDCBC";case"twitter":case"x":return"\uD83D\uDC26";case"discord":return"\uD83D\uDCAC";case"facebook":return"\uD83D\uDCD8";case"instagram":return"\uD83D\uDCF7";case"whatsapp":return"\uD83D\uDC9A";case"tiktok":return"\uD83C\uDFB5";case"quora":return"\uD83D\uDD34";case"directories":return"\uD83D\uDCDD";case"uploaded":return"\uD83D\uDCE4";default:return"\uD83C\uDF10"}};return(0,t.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,t.jsx)(n.A,{}),(0,t.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("header",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white px-6 py-6",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Lead Management"}),(0,t.jsx)("p",{className:"text-purple-100 mt-1",children:"Search • Filter • Source Validation • Lead Pipeline"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,t.jsxs)("span",{className:"text-sm bg-purple-500 px-2 py-1 rounded",children:[A.length," of ",(null==w?void 0:w.totalLeads)||0," Leads"]}),(0,t.jsxs)("span",{className:"text-sm bg-blue-500 px-2 py-1 rounded",children:[D.length," Platforms"]}),(0,t.jsx)("span",{className:"text-sm bg-green-500 px-2 py-1 rounded",children:"Multi-Source"})]})]})})}),(0,t.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(m.p,{placeholder:"Search leads by title, content, or author...",value:a,onChange:e=>u(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(x.l6,{value:h,onValueChange:f,children:[(0,t.jsx)(x.bq,{className:"w-48",children:(0,t.jsx)(x.yv,{placeholder:"All Platforms"})}),(0,t.jsxs)(x.gC,{children:[(0,t.jsxs)(x.eb,{value:"all",children:["All Platforms (",(null==N?void 0:N.length)||0,")"]}),D.map(e=>(0,t.jsxs)(x.eb,{value:e,children:[E(e)," ",e," (",L[e],")"]},e)),R.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 border-t",children:"Monitoring (No Leads)"}),R.map(e=>(0,t.jsxs)(x.eb,{value:e,disabled:!0,children:[E(e)," ",e," (0)"]},e))]})]})]}),(0,t.jsxs)(x.l6,{value:p,onValueChange:v,children:[(0,t.jsx)(x.bq,{className:"w-40",children:(0,t.jsx)(x.yv,{placeholder:"All Urgency"})}),(0,t.jsxs)(x.gC,{children:[(0,t.jsx)(x.eb,{value:"all",children:"All Urgency"}),(0,t.jsx)(x.eb,{value:"high",children:"\uD83D\uDD34 High"}),(0,t.jsx)(x.eb,{value:"medium",children:"\uD83D\uDFE1 Medium"}),(0,t.jsx)(x.eb,{value:"low",children:"\uD83D\uDFE2 Low"})]})]}),(0,t.jsxs)("div",{className:"flex rounded-md border",children:[(0,t.jsx)(c.$,{variant:"list"===e?"default":"ghost",size:"sm",onClick:()=>s("list"),className:"rounded-r-none",children:"List View"}),(0,t.jsx)(c.$,{variant:"kanban"===e?"default":"ghost",size:"sm",onClick:()=>s("kanban"),className:"rounded-l-none",children:"Kanban View"})]})]})}),(0,t.jsx)("div",{className:"bg-white px-6 py-3 border-b border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm flex-wrap gap-2",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Sources:"}),D.slice(0,4).map(e=>(0,t.jsxs)(o.E,{variant:"default",className:"cursor-pointer hover:bg-blue-600 bg-blue-500",onClick:()=>f(e),children:[E(e)," ",e," (",L[e],")"]},e)),R.slice(0,3).map(e=>(0,t.jsxs)(o.E,{variant:"outline",className:"text-gray-500 border-gray-300",children:[E(e)," ",e," (0)"]},e)),(D.length>4||R.length>3)&&(0,t.jsxs)(o.E,{variant:"secondary",className:"cursor-pointer",onClick:()=>{},children:["+",Math.max(0,D.length-4+Math.max(0,R.length-3))," more"]}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["• Active: ",D.length," • Monitoring: ",R.length]})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 p-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:"list"===e?(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(M.A,{className:"h-5 w-5"}),(0,t.jsxs)("span",{children:["Leads (",A.length,")"]}),a&&(0,t.jsxs)(o.E,{variant:"secondary",children:['Filtered by "',a,'"']})]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsx)(k,{leads:A,isLoading:b})})]}):(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(g.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Kanban Pipeline"})]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Kanban view coming soon - shows leads organized by stage"})})]})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(V,{})})]})})]})]})}},45957:(e,s,a)=>{Promise.resolve().then(a.bind(a,41411))},47507:(e,s,a)=>{"use strict";a.d(s,{bq:()=>m,eb:()=>j,gC:()=>f,l6:()=>o,yv:()=>x});var t=a(95155),l=a(12115),r=a(4729),i=a(24033),n=a(12108),d=a(5917),c=a(25016);let o=r.bL;r.YJ;let x=r.WT,m=l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(r.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[l,(0,t.jsx)(r.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=r.PP.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=r.wn.displayName;let f=l.forwardRef((e,s)=>{let{className:a,children:l,position:i="popper",...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsxs)(r.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,t.jsx)(u,{}),(0,t.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(h,{})]})})});f.displayName=r.UC.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=r.JU.displayName;let j=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(r.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})}),(0,t.jsx)(r.p4,{children:l})]})});j.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=r.wv.displayName},54664:(e,s,a)=>{"use strict";a.d(s,{w:()=>n});var t=a(95155),l=a(12115),r=a(47321),i=a(25016);let n=l.forwardRef((e,s)=>{let{className:a,orientation:l="horizontal",decorative:n=!0,...d}=e;return(0,t.jsx)(r.b,{ref:s,decorative:n,orientation:l,className:(0,i.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...d})});n.displayName=r.b.displayName},55850:(e,s,a)=>{"use strict";a.d(s,{k:()=>n});var t=a(95155),l=a(12115),r=a(77450),i=a(25016);let n=l.forwardRef((e,s)=>{let{className:a,value:l,...n}=e;return(0,t.jsx)(r.bL,{ref:s,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,t.jsx)(r.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});n.displayName=r.bL.displayName},67001:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var t=a(95155),l=a(12115),r=a(25016);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});i.displayName="Textarea"},68122:(e,s,a)=>{"use strict";a.d(s,{E:()=>r});var t=a(95155),l=a(25016);function r(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...a})}}},e=>{e.O(0,[7349,1668,4622,2619,7429,4852,2494,3483,1204,7495,245,8441,1255,7358],()=>e(e.s=45957)),_N_E=e.O()}]);