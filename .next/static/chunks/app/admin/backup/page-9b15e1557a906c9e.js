(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{4129:(e,s,a)=>{"use strict";a.d(s,{N:()=>c});var t=a(12115),c=globalThis?.document?t.useLayoutEffect:()=>{}},4614:(e,s,a)=>{Promise.resolve().then(a.bind(a,96595))},6132:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},26983:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},47321:(e,s,a)=>{"use strict";a.d(s,{b:()=>x});var t=a(12115);a(47650);var c=a(32467),l=a(95155),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let a=(0,c.TL)(`Primitive.${s}`),r=t.forwardRef((e,t)=>{let{asChild:c,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(c?a:s,{...r,ref:t})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{}),i="horizontal",n=["horizontal","vertical"],d=t.forwardRef((e,s)=>{var a;let{decorative:t,orientation:c=i,...d}=e,x=(a=c,n.includes(a))?c:i;return(0,l.jsx)(r.div,{"data-orientation":x,...t?{role:"none"}:{"aria-orientation":"vertical"===x?x:void 0,role:"separator"},...d,ref:s})});d.displayName="Separator";var x=d},54664:(e,s,a)=>{"use strict";a.d(s,{w:()=>i});var t=a(95155),c=a(12115),l=a(47321),r=a(25016);let i=c.forwardRef((e,s)=>{let{className:a,orientation:c="horizontal",decorative:i=!0,...n}=e;return(0,t.jsx)(l.b,{ref:s,decorative:i,orientation:c,className:(0,r.cn)("shrink-0 bg-border","horizontal"===c?"h-[1px] w-full":"h-full w-[1px]",a),...n})});i.displayName=l.b.displayName},61362:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},85710:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},89559:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},94446:(e,s,a)=>{"use strict";a.d(s,{s:()=>r,t:()=>l});var t=a(12115);function c(e,s){if("function"==typeof e)return e(s);null!=e&&(e.current=s)}function l(...e){return s=>{let a=!1,t=e.map(e=>{let t=c(e,s);return a||"function"!=typeof t||(a=!0),t});if(a)return()=>{for(let s=0;s<t.length;s++){let a=t[s];"function"==typeof a?a():c(e[s],null)}}}}function r(...e){return t.useCallback(l(...e),e)}},96595:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(95155),c=a(22454),l=a(97003),r=a(83209),i=a(67812),n=a(54664),d=a(61362),x=a(6132),u=a(89559),m=a(17910),o=a(85710),h=a(26983);let p=(0,a(71847).A)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);function j(){let{data:e,refetch:s,isLoading:a}=(0,c.I)({queryKey:["/api/backup/status"],refetchInterval:3e4}),j=async()=>{try{let e=await fetch("/api/backup/manual",{method:"POST"}),a=await e.json();console.log("Manual backup result:",a),s()}catch(e){console.error("Manual backup failed:",e)}},y=e=>new Date(e).toLocaleDateString()+" "+new Date(e).toLocaleTimeString();return a?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{children:"Loading backup status..."})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold flex items-center space-x-2",children:[(0,t.jsx)(m.A,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"Backup Management"})]}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Automated data protection and recovery system"})]}),(0,t.jsxs)(l.$,{onClick:j,className:"flex items-center space-x-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Manual Backup"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{className:"pb-3",children:(0,t.jsx)(r.ZB,{className:"text-sm font-medium text-gray-600",children:"Backup Health"})}),(0,t.jsx)(r.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[e&&("good"===e.backupHealth?(0,t.jsx)(d.A,{className:"h-4 w-4"}):(0,t.jsx)(x.A,{className:"h-4 w-4"})),(0,t.jsx)(i.E,{className:"".concat(e?(e=>{switch(e){case"good":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(e.backupHealth):""),children:(null==e?void 0:e.backupHealth.toUpperCase())||"UNKNOWN"})]})})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{className:"pb-3",children:(0,t.jsx)(r.ZB,{className:"text-sm font-medium text-gray-600",children:"Total Backups"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.totalBackups)||0}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Backup snapshots created"})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{className:"pb-3",children:(0,t.jsx)(r.ZB,{className:"text-sm font-medium text-gray-600",children:"Last Backup"})}),(0,t.jsx)(r.Wu,{children:(null==e?void 0:e.lastBackup)?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:y(e.lastBackup)}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[Math.round((Date.now()-new Date(e.lastBackup).getTime())/36e5)," hours ago"]})]}):(0,t.jsx)("span",{className:"text-gray-400",children:"No backups yet"})})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Backup Schedule"})]}),(0,t.jsx)(r.BT,{children:"Automated backup timing and configuration"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Daily Backups"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:(null==e?void 0:e.schedule.nextRun.daily)||"Not scheduled"})]})]}),(0,t.jsx)(i.E,{variant:(null==e?void 0:e.schedule.dailyBackupActive)?"default":"secondary",children:(null==e?void 0:e.schedule.dailyBackupActive)?"Active":"Inactive"})]}),(0,t.jsx)(n.w,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(p,{className:"h-4 w-4 text-green-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Weekly Comprehensive"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:(null==e?void 0:e.schedule.nextRun.weekly)||"Not scheduled"})]})]}),(0,t.jsx)(i.E,{variant:(null==e?void 0:e.schedule.weeklyBackupActive)?"default":"secondary",children:(null==e?void 0:e.schedule.weeklyBackupActive)?"Active":"Inactive"})]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Recent Backup History"}),(0,t.jsx)(r.BT,{children:"Last 10 backup attempts with component status"})]}),(0,t.jsx)(r.Wu,{children:(null==e?void 0:e.recentBackups)&&e.recentBackups.length>0?(0,t.jsx)("div",{className:"space-y-3",children:e.recentBackups.slice(0,10).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.backupId}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:y(e.timestamp)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(i.E,{className:"text-xs ".concat(e.results.database?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"DB"}),(0,t.jsx)(i.E,{className:"text-xs ".concat(e.results.code?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"Code"}),(0,t.jsx)(i.E,{className:"text-xs ".concat(e.results.configs?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"Config"}),(0,t.jsx)(i.E,{variant:e.success?"default":"destructive",className:"ml-2",children:e.success?"Success":"Failed"})]})]},e.backupId))}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No backup history available"}),(0,t.jsx)("p",{className:"text-sm",children:"Trigger a manual backup to start the protection system"})]})})]})]})}var y=a(96029);function v(){return(0,t.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,t.jsx)(y.A,{}),(0,t.jsxs)("main",{className:"flex-1 overflow-auto",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-8",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Automated Backup System"}),(0,t.jsx)("p",{className:"text-purple-100 mt-1",children:"Data Protection • Recovery • Scheduling"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,t.jsx)("span",{className:"text-sm bg-purple-500 px-2 py-1 rounded",children:"Automated Daily"}),(0,t.jsx)("span",{className:"text-sm bg-blue-500 px-2 py-1 rounded",children:"Git Commits"}),(0,t.jsx)("span",{className:"text-sm bg-green-500 px-2 py-1 rounded",children:"Database Snapshots"})]})]})})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(j,{})})]})]})}}},e=>{e.O(0,[7349,1668,2619,7429,4852,2494,245,8441,1255,7358],()=>e(e.s=4614)),_N_E=e.O()}]);