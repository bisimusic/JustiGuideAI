(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{24490:(e,t,s)=>{Promise.resolve().then(s.bind(s,95015))},25016:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2821),a=s(75889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},28171:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(12115);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=[],c={toasts:[]};function l(e){c=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(c,e),o.forEach(e=>{e(c)})}function d(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:s});return l({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},67812:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var r=s(95155);s(12115);var a=s(83101),n=s(25016);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},83209:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>o});var r=s(95155),a=s(12115),n=s(25016);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});l.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},95015:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(95155),a=s(12115),n=s(12890),i=s(94511),o=s(28171),c=s(97003),l=s(83209),d=s(67812),m=s(17910),p=s(42529),u=s(26983),x=s(91169),f=s(95704);let h=f.env.NEXT_PUBLIC_STRIPE_PUBLIC_KEY||f.env.VITE_STRIPE_PUBLIC_KEY;h||console.warn("Stripe public key not found. Payment functionality may not work.");let g=h?(0,i.c)(h):null,y=[{id:"d2c_n400",name:"U.S. Citizenship Application (N-400)",description:"Complete assistance with your naturalization application",price:499,features:["Expert guidance","Document preparation","Application review","90-day support"],popular:!0,type:"one-time"},{id:"b2b_nonimmigrant_worker",name:"Work Visa Services (H1B, O-1, L-1)",description:"Professional work authorization assistance",price:750,monthly:50,features:["Visa application prep","Legal consultation","Ongoing support","Case monitoring"],type:"subscription"},{id:"b2b_employment_auth",name:"Employment Authorization (EAD)",description:"Work permit application and renewal services",price:350,monthly:100,features:["Application preparation","Renewal tracking","Legal support","Priority processing"],type:"subscription"},{id:"b2b_alien_relative",name:"Family-Based Immigration",description:"Reunite with family through immigration",price:450,monthly:100,features:["Petition preparation","Process guidance","Document support","Case updates"],type:"subscription"}],v=e=>{let{selectedService:t,clientSecret:s}=e,i=(0,n.t2)(),u=(0,n.HH)(),{toast:x}=(0,o.dj)(),[f,h]=(0,a.useState)(!1),g=async e=>{if(e.preventDefault(),!i||!u)return;h(!0);let{error:s}=await i.confirmPayment({elements:u,confirmParams:{return_url:"".concat(window.location.origin,"/payment-success?service=").concat(t.id)}});s&&(x({title:"Payment Failed",description:s.message,variant:"destructive"}),h(!1))};return(0,r.jsx)("div",{className:"max-w-2xl mx-auto p-6",children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-5 w-5 text-green-500"}),"Complete Your ",t.name," Purchase"]}),(0,r.jsx)(l.BT,{children:"Secure payment processed by Stripe"})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h3",{className:"font-medium",children:t.name}),(0,r.jsxs)("span",{className:"text-2xl font-bold",children:["$",t.price]})]}),t.monthly&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Then $",t.monthly,"/month for ongoing support"]}),(0,r.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:t.features.map((e,t)=>(0,r.jsxs)(d.E,{variant:"secondary",className:"text-xs",children:[(0,r.jsx)(p.A,{className:"h-3 w-3 mr-1"}),e]},t))})]}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,r.jsx)(n.He,{}),(0,r.jsx)(c.$,{type:"submit",className:"w-full",disabled:!i||f,"data-testid":"button-complete-payment",children:f?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Processing Payment..."]}):(0,r.jsxs)(r.Fragment,{children:["Complete Payment - $",t.price]})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-center text-sm text-gray-500",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Secured by 256-bit SSL encryption"]})]})]})})},b=e=>{let{onSelectService:t}=e;return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Choose Your Immigration Service"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Expert legal assistance for your immigration journey"})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:y.map(e=>(0,r.jsxs)(l.Zp,{className:"relative cursor-pointer hover:shadow-lg transition-shadow ".concat(e.popular?"ring-2 ring-blue-500":""),onClick:()=>t(e),"data-testid":"card-service-".concat(e.id),children:[e.popular&&(0,r.jsx)(d.E,{className:"absolute -top-2 -right-2 bg-blue-500",children:"Most Popular"}),(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)(l.ZB,{className:"flex justify-between items-start",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["$",e.price]}),e.monthly&&(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["+$",e.monthly,"/mo"]})]})]}),(0,r.jsx)(l.BT,{children:e.description})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsx)("div",{className:"space-y-2 mb-4",children:e.features.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 text-green-500"}),e]},t))}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(u.A,{className:"h-3 w-3"}),"Fast processing"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(x.A,{className:"h-3 w-3"}),"Expert support"]})]}),(0,r.jsx)(c.$,{className:"w-full","data-testid":"button-select-".concat(e.id),children:"Select This Service"})]})]},e.id))})]})};function j(){let[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{e&&(c(!0),fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e.price,serviceId:e.id,serviceName:e.name,serviceType:e.type})}).then(e=>e.json()).then(e=>{i(e.clientSecret),c(!1)}).catch(e=>{console.error("Payment intent creation failed:",e),c(!1)}))},[e]),e)?o||!s?(0,r.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-2"}),(0,r.jsx)("p",{children:"Preparing secure payment..."})]})}):(0,r.jsx)(n.S8,{stripe:g,options:{clientSecret:s},children:(0,r.jsx)(v,{selectedService:e,clientSecret:s})}):(0,r.jsx)(b,{onSelectService:t})}},97003:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(95155),a=s(12115),n=s(32467),i=s(83101),o=s(25016);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:l=!1,...d}=e,m=l?n.DX:"button";return(0,r.jsx)(m,{className:(0,o.cn)(c({variant:a,size:i,className:s})),ref:t,...d})});l.displayName="Button"}},e=>{e.O(0,[7349,6181,8441,1255,7358],()=>e(e.s=24490)),_N_E=e.O()}]);