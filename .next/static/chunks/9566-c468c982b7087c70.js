"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{27360:(e,t,s)=>{s.d(t,{l:()=>m});var a=s(95155),r=s(22454),i=s(83209),l=s(67812),n=s(97003),c=s(16485),d=s(26983),o=s(93499);function m(e){let{limit:t=5,showCategories:s=!0,layout:m="grid",title:x="Latest Immigration Insights"}=e,{data:g,isLoading:h,error:u}=(0,r.I)({queryKey:["/api/content/substack/posts"],refetchInterval:3e5}),p=(null==g?void 0:g.posts)||[],j=p.slice(0,t);if(h)return(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]},t))})]})})});if(u||0===p.length)return(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"Unable to load blog posts at the moment."})})});let f=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),v=e=>{let t={h1b:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",eb5:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",greencard:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",policy:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",general:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return t[e]||t.general};return"list"===m?(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 mr-2"}),x]})}),(0,a.jsx)(i.Wu,{className:"space-y-4",children:j.map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors","data-testid":"blog-post-".concat(e.id),children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:e.title}),e.subtitle&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.subtitle}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 line-clamp-2",children:e.excerpt}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-1"}),f(e.publishedAt)]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-1"}),e.readingTime," min read"]}),s&&e.categories.length>0&&(0,a.jsx)("div",{className:"flex gap-1",children:e.categories.slice(0,2).map(e=>(0,a.jsx)(l.E,{variant:"secondary",className:"text-xs ".concat(v(e)),children:e.toUpperCase()},e))})]})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>window.open(e.url,"_blank"),"data-testid":"view-blog-post-".concat(e.id),children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})]},e.id))})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:x}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>(0,a.jsxs)(i.Zp,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.open(e.url,"_blank"),"data-testid":"blog-card-".concat(e.id),children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)(i.ZB,{className:"text-lg line-clamp-2",children:e.title}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-400 flex-shrink-0 ml-2"})]}),e.subtitle&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.subtitle})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3 mb-4",children:e.excerpt}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-3 w-3 mr-1"}),f(e.publishedAt)]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"h-3 w-3 mr-1"}),e.readingTime,"m"]})]}),s&&e.categories.length>0&&(0,a.jsx)(l.E,{variant:"secondary",className:"text-xs ".concat(v(e.categories[0])),children:e.categories[0].toUpperCase()})]})]})]},e.id))})]})}},31881:(e,t,s)=>{s.d(t,{O:()=>b});var a=s(95155),r=s(12115),i=s(22454),l=s(80549),n=s(81630),c=s(96498),d=s(83209),o=s(97003),m=s(47507),x=s(33789),g=s(67001),h=s(90235),u=s(67812),p=s(90923),j=s(28171),f=s(56154),v=s(9602),y=s(75426);function b(){let{toast:e}=(0,j.dj)(),{getTrackingParameters:t,utmData:s}=(0,c.r)(),[b,N]=(0,r.useState)("lead_magnet"),[w,k]=(0,r.useState)(""),[T,S]=(0,r.useState)(""),[_,P]=(0,r.useState)(""),[C,U]=(0,r.useState)("inline"),[D,R]=(0,r.useState)(null),[M,A]=(0,r.useState)("preview"),{data:I}=(0,i.I)({queryKey:["/api/lead-magnets"],refetchInterval:!1}),E=(0,l.n)({mutationFn:async e=>{let a=t();return await (0,n.AT)("/api/cross-promotion/generate-widget",{method:"POST",body:JSON.stringify({...e,utmParameters:a,sessionId:null==s?void 0:s.session_id,sourceContext:{landingPage:null==s?void 0:s.landing_page,referrer:null==s?void 0:s.referrer,isReturningVisitor:null==s?void 0:s.is_returning_visitor,capturedAt:null==s?void 0:s.captured_at}})})},onSuccess:t=>{R(t.widget),e({title:"Widget Generated!",description:"Your promotional widget is ready to embed in your blog posts."})},onError:t=>{e({variant:"destructive",title:"Generation Failed",description:t.message||"Failed to generate widget"})}}),Z=async t=>{try{await navigator.clipboard.writeText(t),e({title:"Copied!",description:"Widget code copied to clipboard"})}catch(t){e({variant:"destructive",title:"Copy Failed",description:"Unable to copy to clipboard"})}},F=(null==I?void 0:I.magnets)||[];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsxs)(d.ZB,{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 mr-2"}),"Widget Generator"]})}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"widget-type",children:"Widget Type"}),(0,a.jsxs)(m.l6,{value:b,onValueChange:e=>N(e),children:[(0,a.jsx)(m.bq,{"data-testid":"select-widget-type",children:(0,a.jsx)(m.yv,{placeholder:"Select widget type..."})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"lead_magnet",children:"Lead Magnet Promotion"}),(0,a.jsx)(m.eb,{value:"email_signup",children:"Email Signup"}),(0,a.jsx)(m.eb,{value:"platform_promotion",children:"Platform Promotion"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:{lead_magnet:"Promote a specific lead magnet or guide to capture targeted leads",email_signup:"General email signup widget to build your subscriber list",platform_promotion:"Promote the main JustiGuide platform and services"}[b]||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"widget-style",children:"Widget Style"}),(0,a.jsxs)(m.l6,{value:C,onValueChange:e=>U(e),children:[(0,a.jsx)(m.bq,{"data-testid":"select-widget-style",children:(0,a.jsx)(m.yv,{placeholder:"Select widget style..."})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"banner",children:"Banner"}),(0,a.jsx)(m.eb,{value:"sidebar",children:"Sidebar"}),(0,a.jsx)(m.eb,{value:"inline",children:"Inline"}),(0,a.jsx)(m.eb,{value:"popup",children:"Popup"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:{banner:"Full-width banner ideal for top/bottom of posts",sidebar:"Compact widget perfect for sidebar placement",inline:"Inline widget that flows naturally within content",popup:"Attention-grabbing popup style widget"}[C]||""})]})]}),"lead_magnet"===b&&(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"target-magnet",children:"Target Lead Magnet"}),(0,a.jsxs)(m.l6,{value:w,onValueChange:k,children:[(0,a.jsx)(m.bq,{"data-testid":"select-target-magnet",children:(0,a.jsx)(m.yv,{placeholder:"Select lead magnet to promote..."})}),(0,a.jsx)(m.gC,{children:F.map(e=>(0,a.jsxs)(m.eb,{value:e.id,children:[e.title," (",e.category,")"]},e.id))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"custom-title",children:"Custom Title (Optional)"}),(0,a.jsx)(x.p,{id:"custom-title",placeholder:"Override default title...",value:T,onChange:e=>S(e.target.value),"data-testid":"input-custom-title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"custom-description",children:"Custom Description (Optional)"}),(0,a.jsx)(g.T,{id:"custom-description",placeholder:"Override default description...",value:_,onChange:e=>P(e.target.value),rows:2,"data-testid":"textarea-custom-description"})]})]}),(0,a.jsx)(o.$,{onClick:()=>{if("lead_magnet"===b&&!w)return void e({variant:"destructive",title:"Selection Required",description:"Please select a lead magnet for promotion"});E.mutate({type:b,targetId:w||void 0,customTitle:T||void 0,customDescription:_||void 0,style:C})},disabled:E.isPending||"lead_magnet"===b&&!w,className:"w-full","data-testid":"button-generate-widget",children:E.isPending?"Generating...":"Generate Widget"})]})]}),D&&(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(d.ZB,{className:"flex items-center",children:[(0,a.jsx)(v.A,{className:"h-5 w-5 mr-2"}),"Generated Widget"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.E,{variant:"outline",children:D.type}),(0,a.jsx)(u.E,{variant:"secondary",children:C})]})]})}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsxs)(p.tU,{value:M,onValueChange:e=>A(e),children:[(0,a.jsxs)(p.j7,{children:[(0,a.jsx)(p.Xi,{value:"preview",children:"Preview"}),(0,a.jsx)(p.Xi,{value:"code",children:"HTML Code"})]}),(0,a.jsx)(p.av,{value:"preview",className:"space-y-4",children:(0,a.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:D.htmlCode}})})}),(0,a.jsx)(p.av,{value:"code",className:"space-y-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("pre",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg text-sm overflow-x-auto",children:(0,a.jsx)("code",{children:D.htmlCode})}),(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>Z(D.htmlCode),"data-testid":"button-copy-html",children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{children:"Target URL:"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 truncate",children:D.targetUrl})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{children:"Widget ID:"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:D.id})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{children:"Tracking Parameters:"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Object.entries(D.trackingParams).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsxs)("span",{className:"text-gray-500",children:[t,":"]}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:s})]},t)})})]}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"How to Use This Widget:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[(0,a.jsx)("li",{children:"1. Copy the HTML code above"}),(0,a.jsx)("li",{children:"2. Paste it into your Substack post where you want the promotion to appear"}),(0,a.jsx)("li",{children:"3. The widget will automatically track clicks and conversions"}),(0,a.jsx)("li",{children:"4. Monitor performance in the Cross-Promotion Analytics dashboard"})]})]})]})]})]})}},47507:(e,t,s)=>{s.d(t,{bq:()=>x,eb:()=>p,gC:()=>u,l6:()=>o,yv:()=>m});var a=s(95155),r=s(12115),i=s(4729),l=s(24033),n=s(12108),c=s(5917),d=s(25016);let o=i.bL;i.YJ;let m=i.WT,x=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(i.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[r,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=i.l9.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});g.displayName=i.PP.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=i.wn.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...n}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:[(0,a.jsx)(g,{}),(0,a.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});u.displayName=i.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=i.JU.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(i.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:r})]})});p.displayName=i.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=i.wv.displayName},90235:(e,t,s)=>{s.d(t,{J:()=>d});var a=s(95155),r=s(12115),i=s(32894),l=s(83101),n=s(25016);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.b,{ref:t,className:(0,n.cn)(c(),s),...r})});d.displayName=i.b.displayName},92195:(e,t,s)=>{s.d(t,{K:()=>p});var a=s(95155),r=s(22454),i=s(83209),l=s(67812),n=s(97003),c=s(90923),d=s(55850),o=s(93499),m=s(1524),x=s(23664),g=s(91761),h=s(80534),u=s(91169);function p(){let{data:e,isLoading:t,error:s}=(0,r.I)({queryKey:["/api/cross-promotion/metrics"],refetchInterval:3e4}),{data:p}=(0,r.I)({queryKey:["/api/cross-promotion/promotions"],refetchInterval:!1});if(t)return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"},t))})]})});if(s)return(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 text-center",children:"Failed to load cross-promotion analytics."})})});let j=e||{blogToPlatform:{totalClicks:0,conversions:0,conversionRate:0,topSources:[]},platformToBlog:{totalClicks:0,engagement:0,topContent:[]},emailSyncStats:{totalSynced:0,duplicatesRemoved:0,activeSubscribers:0}},f=(null==p?void 0:p.promotions)||[],v=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return e*t};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Cross-Promotion Analytics"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track performance between your Substack blog and lead generation platform"})]}),(0,a.jsx)(l.E,{variant:"secondary",className:"text-sm",children:"Real-time"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Blog → Platform"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:j.blogToPlatform.totalClicks}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"clicks"})]})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Conversions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:j.blogToPlatform.conversions}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(100*j.blogToPlatform.conversionRate).toFixed(1),"% rate"]})]})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"h-8 w-8 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Synced Emails"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:j.emailSyncStats.activeSubscribers}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"active subscribers"})]})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.A,{className:"h-8 w-8 text-orange-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Estimated Value"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:v(y(j.blogToPlatform.conversions))}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"from conversions"})]})]})})})]}),(0,a.jsxs)(c.tU,{defaultValue:"overview",className:"w-full",children:[(0,a.jsxs)(c.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(c.Xi,{value:"overview",children:"Overview"}),(0,a.jsx)(c.Xi,{value:"traffic",children:"Traffic Flow"}),(0,a.jsx)(c.Xi,{value:"promotions",children:"Content Promotions"})]}),(0,a.jsx)(c.av,{value:"overview",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-lg",children:"Blog → Platform Performance"})}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Conversion Rate"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[(100*j.blogToPlatform.conversionRate).toFixed(1),"%"]})]}),(0,a.jsx)(d.k,{value:100*j.blogToPlatform.conversionRate,className:"w-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold",children:"Top Performing Content"}),j.blogToPlatform.topSources.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"truncate",children:e.source}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.E,{variant:"outline",className:"text-xs",children:[e.clicks," clicks"]}),(0,a.jsxs)(l.E,{variant:"secondary",className:"text-xs",children:[e.conversions," conv"]})]})]},t))]})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-lg",children:"Platform → Blog Performance"})}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Engagement Rate"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[(100*j.platformToBlog.engagement).toFixed(1),"%"]})]}),(0,a.jsx)(d.k,{value:100*j.platformToBlog.engagement,className:"w-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold",children:"Popular Blog Content"}),j.platformToBlog.topContent.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.E,{variant:"outline",className:"text-xs",children:[e.clicks," clicks"]}),(0,a.jsxs)(l.E,{variant:"secondary",className:"text-xs",children:[(100*e.engagement).toFixed(0),"% eng"]})]})]},t))]})]})]})]})}),(0,a.jsx)(c.av,{value:"traffic",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Cross-Platform Traffic Flow"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-center space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-80",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)(h.A,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Substack Blog"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Source Content"})]}),(0,a.jsx)("div",{className:"flex-1 mx-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded"}),(0,a.jsx)("div",{className:"absolute top-3 left-1/2 transform -translate-x-1/2",children:(0,a.jsxs)(l.E,{variant:"secondary",className:"text-xs",children:[j.blogToPlatform.totalClicks," clicks"]})})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)(u.A,{className:"h-8 w-8 text-purple-600"})}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"JustiGuide Platform"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Lead Conversion"})]})]})})})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Email List Synchronization"})}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:j.emailSyncStats.totalSynced}),(0,a.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Total Synced"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:j.emailSyncStats.duplicatesRemoved}),(0,a.jsx)("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Duplicates Removed"})]})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:j.emailSyncStats.activeSubscribers}),(0,a.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Active Subscribers"})]})]})]})]})}),(0,a.jsx)(c.av,{value:"promotions",className:"space-y-6",children:(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Content Promotion Opportunities"})}),(0,a.jsx)(i.Wu,{children:0===f.length?(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center py-8",children:"No content promotions available. Generate some promotional widgets to get started."}):(0,a.jsx)("div",{className:"space-y-4",children:f.slice(0,5).map((e,t)=>(0,a.jsx)("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg","data-testid":"promotion-".concat(e.postId),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.postTitle}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,a.jsxs)(l.E,{variant:"outline",className:"text-xs",children:[e.relevantMagnets.length," relevant magnets"]}),(0,a.jsxs)(l.E,{variant:"secondary",className:"text-xs",children:["Est. reach: ",e.estimatedReach]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Promotion potential: High value for cross-platform lead generation"})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>window.open(e.postUrl,"_blank"),"data-testid":"view-promotion-".concat(e.postId),children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})]})},e.postId))})})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Performance Summary"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 text-green-600 mr-2"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Cross-Platform ROI"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:v(y(j.blogToPlatform.conversions))}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimated lead value from blog traffic"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(u.A,{className:"h-6 w-6 text-blue-600 mr-2"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Audience Growth"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:["+",Math.floor(j.emailSyncStats.activeSubscribers/30*100),"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monthly growth from cross-promotion"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(h.A,{className:"h-6 w-6 text-purple-600 mr-2"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Content Synergy"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:[((j.platformToBlog.engagement+j.blogToPlatform.conversionRate)*50).toFixed(0),"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall platform integration score"})]})]})})]})]})}},96498:(e,t,s)=>{s.d(t,{r:()=>l});var a=s(12115);let r="justiguide_utm_tracking";class i{static getInstance(){return this.instance||(this.instance=new i),this.instance}initializeTracking(){let e=this.getStoredUTMData(),t=this.extractUTMFromURL();this.shouldCaptureNewUTMData(e,t)&&this.hasValidUTMData(t)?this.captureUTMData(t):e&&this.isDataValid(e)?this.utmData=e:this.createMinimalTrackingData(),this.cleanURLParameters()}extractUTMFromURL(){let e=new URLSearchParams(window.location.search),t={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","ref","gclid","fbclid"].forEach(s=>{let a=e.get(s);a&&(t[s]=a)}),t}hasValidUTMData(e){return!!(e.utm_source||e.ref||e.gclid||e.fbclid)}shouldCaptureNewUTMData(e,t){return!(!(!e&&this.hasValidUTMData(t))&&(!e||this.isDataValid(e)))||!!e&&!!t.utm_campaign&&t.utm_campaign!==e.utm_campaign||!!e&&!!t.ref&&t.ref!==e.ref}captureUTMData(e){let t={...e,captured_at:new Date().toISOString(),page_path:window.location.pathname,user_agent:navigator.userAgent,referrer:document.referrer||void 0,landing_page:window.location.pathname,session_id:this.generateSessionId(),is_returning_visitor:this.isReturningVisitor()};this.utmData=t,this.storeUTMData(t),this.notifyListeners(),console.log("\uD83C\uDFAF UTM tracking captured:",t)}createMinimalTrackingData(){let e={captured_at:new Date().toISOString(),page_path:window.location.pathname,user_agent:navigator.userAgent,referrer:document.referrer||void 0,landing_page:window.location.pathname,session_id:this.generateSessionId(),is_returning_visitor:this.isReturningVisitor(),utm_source:this.inferTrafficSource()};this.utmData=e,this.storeUTMData(e),this.notifyListeners()}inferTrafficSource(){let e=document.referrer;return e?e.includes("google.com")?"google":e.includes("reddit.com")?"reddit":e.includes("linkedin.com")?"linkedin":e.includes("facebook.com")?"facebook":e.includes("twitter.com")||e.includes("x.com")?"twitter":"referral":"direct"}generateSessionId(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}isReturningVisitor(){return!!localStorage.getItem("justiguide_visitor_id")}storeUTMData(e){try{sessionStorage.setItem(r,JSON.stringify(e)),localStorage.getItem("justiguide_visitor_id")||localStorage.setItem("justiguide_visitor_id",e.session_id||"")}catch(e){console.warn("Failed to store UTM data:",e)}}getStoredUTMData(){try{let e=sessionStorage.getItem(r);return e?JSON.parse(e):null}catch(e){return console.warn("Failed to retrieve UTM data:",e),null}}isDataValid(e){let t=new Date(e.captured_at);return new Date().getTime()-t.getTime()<2592e6}cleanURLParameters(){let e=new URL(window.location.href),t=!1;["utm_source","utm_medium","utm_campaign","utm_term","utm_content","ref","gclid","fbclid"].forEach(s=>{e.searchParams.has(s)&&(e.searchParams.delete(s),t=!0)}),t&&window.history.replaceState({},"",e.toString())}getUTMData(){return this.utmData}getUTMParameters(){if(!this.utmData)return{};let{captured_at:e,page_path:t,user_agent:s,is_returning_visitor:a,...r}=this.utmData;return r}getTrackingParameters(){let e=this.getUTMParameters(),t={};return Object.entries(e).forEach(e=>{let[s,a]=e;a&&(t[s]=String(a))}),t}appendUTMToUrl(e){let t=this.getTrackingParameters();if(0===Object.keys(t).length)return e;let s=new URL(e);return Object.entries(t).forEach(e=>{let[t,a]=e;s.searchParams.set(t,a)}),s.toString()}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.utmData))}updateUTMData(e){this.utmData&&(this.utmData={...this.utmData,...e},this.storeUTMData(this.utmData),this.notifyListeners())}clearUTMData(){this.utmData=null,sessionStorage.removeItem(r),this.notifyListeners()}constructor(){this.utmData=null,this.listeners=[],this.initializeTracking()}}function l(){let[e,t]=(0,a.useState)(null),s=i.getInstance();(0,a.useEffect)(()=>(t(s.getUTMData()),s.subscribe(t)),[s]);let r=(0,a.useCallback)(()=>s.getUTMParameters(),[s]),l=(0,a.useCallback)(()=>s.getTrackingParameters(),[s]);return{utmData:e,getUTMParameters:r,getTrackingParameters:l,appendUTMToUrl:(0,a.useCallback)(e=>s.appendUTMToUrl(e),[s]),updateUTMData:(0,a.useCallback)(e=>{s.updateUTMData(e)},[s]),hasUTMData:!!e,isReturningVisitor:(null==e?void 0:e.is_returning_visitor)||!1}}}}]);